/*! shiny 1.5.0.9001 | (c) 2012-2020 RStudio, Inc. | License: GPL-3 | file LICENSE */

"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}!function(){var $=jQuery,exports=window.Shiny=window.Shiny||{};exports.version="1.5.0.9001";var origPushState=window.history.pushState;function escapeHTML(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","/":"&#x2F;"};return t.replace(/[&<>'"\/]/g,function(t){return e[t]})}function randomId(){return Math.floor(4294967296+64424509440*Math.random()).toString(16)}function strToBool(t){if(t&&t.toLowerCase)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}}function getStyle(t,e){var n,i;return t.currentStyle?n=t.currentStyle[e]:!window.getComputedStyle||(i=document.defaultView.getComputedStyle(t,null))&&(n=i.getPropertyValue(e)),n}function padZeros(t,e){for(var n=t.toString();n.length<e;)n="0"+n;return n}function roundSignif(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(e<1)throw"Significant digits must be at least 1.";return parseFloat(t.toPrecision(e))}function parseDate(t){var e=new Date(t);return isNaN(e)&&(e=new Date(t.replace(/-/g,"/"))),e}function formatDateUTC(t){return t instanceof Date?t.getUTCFullYear()+"-"+padZeros(t.getUTCMonth()+1,2)+"-"+padZeros(t.getUTCDate(),2):null}function makeResizeFilter(e,n){var i={};return function(){var t={w:e.offsetWidth,h:e.offsetHeight};0===t.w&&0===t.h||t.w===i.w&&t.h===i.h||n((i=t).w,t.h)}}window.history.pushState=function(){var t=origPushState.apply(this,arguments);return $(document).trigger("pushstate"),t},$(document).on("submit","form:not([action])",function(t){t.preventDefault()});var _BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;function makeBlob(e){try{return new Blob(e)}catch(t){var n=new _BlobBuilder;return $.each(e,function(t,e){n.append(e)}),n.getBlob()}}function pixelRatio(){return window.devicePixelRatio?window.devicePixelRatio:1}function scopeExprToFunc(e){var t=e.replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b");try{var n=new Function("with (this) {\n        try {\n          return (".concat(e,");\n        } catch (e) {\n          console.error('Error evaluating expression: ").concat(t,"');\n          throw e;\n        }\n      }"))}catch(t){throw console.error("Error parsing expression: "+e),t}return function(t){return n.call(t)}}function asArray(t){return null==t?[]:$.isArray(t)?t:[t]}function mergeSort(t,e){t=t.slice(0);for(var n=1;n<t.length;n*=2)for(var i=0;i<t.length;i+=2*n){var a=function(t,e,n){for(var i=0,a=0,r=[];i<e.length&&a<n.length;)t(e[i],n[a])<=0?r.push(e[i++]):r.push(n[a++]);for(;i<e.length;)r.push(e[i++]);for(;a<n.length;)r.push(n[a++]);return r}(e,t.slice(i,i+n),t.slice(i+n,i+2*n)),r=[i,a.length];Array.prototype.push.apply(r,a),Array.prototype.splice.apply(t,r)}return t}var $escape=exports.$escape=function(t){return t.replace(/([!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~])/g,"\\$1")};function mapValues(t,e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=e(t[i],i,t));return n}function isnan(t){return"number"==typeof t&&isNaN(t)}function _equal(t,e){if("object"===$.type(t)&&"object"===$.type(e)){if(Object.keys(t).length!==Object.keys(e).length)return;for(var n in t)if(!e.hasOwnProperty(n)||!_equal(t[n],e[n]))return;return 1}if("array"!==$.type(t)||"array"!==$.type(e))return t===e;if(t.length===e.length){for(var i=0;i<t.length;i++)if(!_equal(t[i],e[i]))return;return 1}}function equal(){if(arguments.length<2)throw new Error("equal requires at least two arguments.");for(var t=0;t<arguments.length-1;t++)if(!_equal(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1]))return;return 1}function updateLabel(t,e){if(void 0!==t){if(1!==e.length)throw new Error("labelNode must be of length 1");$.isArray(t)&&0===t.length?e.addClass("shiny-label-null"):(e.text(t),e.removeClass("shiny-label-null"))}}exports.compareVersion=function(t,e,n){function r(t){return(t+"").replace(/-/,".").replace(/(\.0)+[^\.]*$/,"").split(".")}var i=function(t,e){t=r(t),e=r(e);for(var n,i=Math.min(t.length,e.length),a=0;a<i;a++)if(0!=(n=parseInt(t[a],10)-parseInt(e[a],10)))return n;return t.length-e.length}(t,n);if("=="===e)return 0===i;if(">="===e)return 0<=i;if(">"===e)return 0<i;if("<="===e)return i<=0;if("<"===e)return i<0;throw"Unknown operator: ".concat(e)};var browser=function(){var t=!1;/\bQt\//.test(window.navigator.userAgent)&&($(document.documentElement).addClass("qt"),t=!0),/\bQt\/5/.test(window.navigator.userAgent)&&/Linux/.test(window.navigator.userAgent)&&$(document.documentElement).addClass("qt5");var e,n,i="Microsoft Internet Explorer"===navigator.appName;return{isQt:t,isIE:i,IEVersion:(n=-1,i&&(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(e)&&(n=parseFloat(RegExp.$1))),n)}}(),Invoker=function(t,e){this.target=t,this.func=e};(function(){this.normalCall=this.immediateCall=function(){this.func.apply(this.target,arguments)}}).call(Invoker.prototype);var Debouncer=function(t,e,n){this.target=t,this.func=e,this.delayMs=n,this.timerId=null,this.args=null};(function(){this.normalCall=function(){var t=this;this.$clearTimer(),this.args=arguments,this.timerId=setTimeout(function(){null!==t.timerId&&(t.$clearTimer(),t.$invoke())},this.delayMs)},this.immediateCall=function(){this.$clearTimer(),this.args=arguments,this.$invoke()},this.isPending=function(){return null!==this.timerId},this.$clearTimer=function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},this.$invoke=function(){this.func.apply(this.target,this.args),this.args=null}}).call(Debouncer.prototype);var Throttler=function(t,e,n){this.target=t,this.func=e,this.delayMs=n,this.timerId=null,this.args=null};function debounce(t,e){var n,i,a=null;return function(){n=this,i=arguments,null!==a&&(clearTimeout(a),a=null),a=setTimeout(function(){null!==a&&(a=null,e.apply(n,i))},t)}}function throttle(t,e){var n,i,a=!1,r=null;function o(){(i=n=null)===r?(r=setTimeout(function(){r=null,a&&(a=!1,o.apply(n,i))},t),e.apply(this,arguments)):(a=!0,n=this,i=arguments)}return o}(function(){this.normalCall=function(){var t=this;this.args=arguments,null===this.timerId&&(this.$invoke(),this.timerId=setTimeout(function(){null!==t.timerId&&(t.$clearTimer(),t.args&&t.normalCall.apply(t,t.args))},this.delayMs))},this.immediateCall=function(){this.$clearTimer(),this.args=arguments,this.$invoke()},this.isPending=function(){return null!==this.timerId},this.$clearTimer=function(){null!==this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},this.$invoke=function(){this.func.apply(this.target,this.args),this.args=null}}).call(Throttler.prototype);var InputBatchSender=function(t){this.shinyapp=t,this.timerId=null,this.pendingData={},this.reentrant=!1,this.lastChanceCallback=[]};(function(){this.setInput=function(t,e,n){this.pendingData[t]=e,this.reentrant||("event"===n.priority?this.$sendNow():this.timerId||(this.timerId=setTimeout(this.$sendNow.bind(this),0)))},this.$sendNow=function(){this.reentrant&&console.trace("Unexpected reentrancy in InputBatchSender!"),this.reentrant=!0;try{this.timerId=null,$.each(this.lastChanceCallback,function(t,e){e()});var t=this.pendingData;this.pendingData={},this.shinyapp.sendInput(t)}finally{this.reentrant=!1}}}).call(InputBatchSender.prototype);var InputNoResendDecorator=function(t,e){this.target=t,this.lastSentValues=this.reset(e)};(function(){this.setInput=function(t,e,n){var i=splitInputNameType(t),a=i.name,r=i.inputType,o=JSON.stringify(e);"event"!==n.priority&&this.lastSentValues[a]&&this.lastSentValues[a].jsonValue===o&&this.lastSentValues[a].inputType===r||(this.lastSentValues[a]={jsonValue:o,inputType:r},this.target.setInput(t,e,n))},this.reset=function(){var t,e,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a={};for(var r in i){i.hasOwnProperty(r)&&(e=(t=splitInputNameType(r)).name,n=t.inputType,a[e]={jsonValue:JSON.stringify(i[r]),inputType:n})}this.lastSentValues=a}}).call(InputNoResendDecorator.prototype);var InputEventDecorator=function(t){this.target=t};(function(){this.setInput=function(t,e,n){var i,a=jQuery.Event("shiny:inputchanged"),r=splitInputNameType(t);a.name=r.name,a.inputType=r.inputType,a.value=e,a.binding=n.binding,a.el=n.el,a.priority=n.priority,$(n.el).trigger(a),a.isDefaultPrevented()||(i=a.name,""!==a.inputType&&(i+=":"+a.inputType),this.target.setInput(i,a.value,{priority:n.priority}))}}).call(InputEventDecorator.prototype);var InputRateDecorator=function(t){this.target=t,this.inputRatePolicies={}};(function(){this.setInput=function(t,e,n){var i=splitInputNameType(t).name;this.$ensureInit(i),"deferred"!==n.priority?this.inputRatePolicies[i].immediateCall(t,e,n):this.inputRatePolicies[i].normalCall(t,e,n)},this.setRatePolicy=function(t,e,n){var i=splitInputNameType(t).name;"direct"===e?this.inputRatePolicies[i]=new Invoker(this,this.$doSetInput):"debounce"===e?this.inputRatePolicies[i]=new Debouncer(this,this.$doSetInput,n):"throttle"===e&&(this.inputRatePolicies[i]=new Throttler(this,this.$doSetInput,n))},this.$ensureInit=function(t){t in this.inputRatePolicies||this.setRatePolicy(t,"direct")},this.$doSetInput=function(t,e,n){this.target.setInput(t,e,n)}}).call(InputRateDecorator.prototype);var InputDeferDecorator=function(t){this.target=t,this.pendingInput={}};(function(){this.setInput=function(t,e,n){/^\./.test(t)?this.target.setInput(t,e,n):this.pendingInput[t]={value:e,opts:n}},this.submit=function(){for(var t in this.pendingInput){var e,n,i;this.pendingInput.hasOwnProperty(t)&&(n=(e=this.pendingInput[t]).value,i=e.opts,this.target.setInput(t,n,i))}}}).call(InputDeferDecorator.prototype);var InputValidateDecorator=function(t){this.target=t};function addDefaultInputOpts(t){if((t=$.extend({priority:"immediate",binding:null,el:null},t))&&void 0!==t.priority)switch(t.priority){case"deferred":case"immediate":case"event":break;default:throw new Error("Unexpected input value mode: '"+t.priority+"'")}return t}function splitInputNameType(t){var e=t.split(":");return{name:e[0],inputType:1<e.length?e[1]:""}}(function(){this.setInput=function(t,e,n){if(!t)throw"Can't set input with empty name.";n=addDefaultInputOpts(n),this.target.setInput(t,e,n)}}).call(InputValidateDecorator.prototype);var ShinyApp=function(){this.$socket=null,this.$inputValues={},this.$initialInput={},this.$bindings={},this.$values={},this.$errors={},this.$conditionals={},this.$pendingMessages=[],this.$activeRequests={},this.$nextRequestId=0,this.$allowReconnect=!1},Gg,Ng;function Hg(){var t,e=$("#shiny-reconnect-time");0!==e.length&&(0<(t=Math.floor((Gg-(new Date).getTime())/1e3))?e.text(" in "+t+"s"):e.text("..."),setTimeout(Hg,1e3))}function Pg(t){Qg(t).fadeOut(Ng,function(){exports.unbindAll(this),$(this).remove(),0===Sg().find(".shiny-notification").map(function(){return this.id.replace(/shiny-notification-/,"")}).get().length&&Sg().remove()})}function Qg(t){return t?Sg().find("#shiny-notification-"+$escape(t)):null}function Sg(){return $("#shiny-notification-panel")}function Wg(t){var e=Qg(t).data("removalCallback");e&&clearTimeout(e)}(function(){this.connect=function(t){if(this.$socket)throw"Connect was already called on this application object";this.$socket=this.createSocket(),this.$initialInput=t,$.extend(this.$inputValues,t),this.$updateConditionals()},this.isConnected=function(){return!!this.$socket};var scheduledReconnect=null;this.reconnect=function(){if(clearTimeout(scheduledReconnect),this.isConnected())throw"Attempted to reconnect, but already connected.";this.$socket=this.createSocket(),this.$initialInput=$.extend({},this.$inputValues),this.$updateConditionals()},this.createSocket=function(){var e=this,n=(exports.createSocket||function(){var t="ws:";"https:"===window.location.protocol&&(t="wss:");var e=window.location.pathname;/^([$#!&-;=?-[\]_a-z~]|%[0-9a-fA-F]{2})+$/.test(e)||(e=encodeURI(e),browser.isQt&&(e=encodeURI(e))),/\/$/.test(e)||(e+="/"),e+="websocket/";var n=new WebSocket(t+"//"+window.location.host+e);return n.binaryType="arraybuffer",n})(),i=!1;return n.onopen=function(){for(i=!0,$(document).trigger({type:"shiny:connected",socket:n}),e.onConnected(),n.send(JSON.stringify({method:"init",data:e.$initialInput}));e.$pendingMessages.length;){var t=e.$pendingMessages.shift();n.send(t)}},n.onmessage=function(t){e.dispatchMessage(t.data)},n.onclose=function(){i&&($(document).trigger({type:"shiny:disconnected",socket:n}),e.$notifyDisconnected()),e.onDisconnected(),e.$removeSocket()},n},this.sendInput=function(t){var e=JSON.stringify({method:"update",data:t});this.$sendMsg(e),$.extend(this.$inputValues,t),this.$updateConditionals()},this.$notifyDisconnected=function(){window.parent&&window.parent.postMessage("disconnected","*")},this.$removeSocket=function(){this.$socket=null},this.$scheduleReconnect=function(t){var e=this;scheduledReconnect=setTimeout(function(){e.reconnect()},t)};var reconnectDelay=(Ic=0,Jc=[1500,1500,2500,2500,5500,5500,10500],{next:function(){var t=Ic;return Jc.length<=t&&(t=Jc.length-1),Ic++,Jc[t]},reset:function(){Ic=0}}),Ic,Jc;function narrowScopeComponent(e,n){return Object.keys(e).filter(function(t){return 0===t.indexOf(n)}).map(function(t){return _defineProperty({},t.substring(n.length),e[t])}).reduce(function(t,e){return $.extend(t,e)},{})}function narrowScope(t,e){return e?{input:narrowScopeComponent(t.input,e),output:narrowScopeComponent(t.output,e)}:t}this.onDisconnected=function(){var t;0===$("#shiny-disconnected-overlay").length&&$(document.body).append('<div id="shiny-disconnected-overlay"></div>'),(!0===this.$allowReconnect&&!0===this.$socket.allowReconnect||"force"===this.$allowReconnect)&&(t=reconnectDelay.next(),exports.showReconnectDialog(t),this.$scheduleReconnect(t))},this.onConnected=function(){$("#shiny-disconnected-overlay").remove(),exports.hideReconnectDialog(),reconnectDelay.reset()},this.makeRequest=function(t,e,n,i,a){for(var r=this.$nextRequestId;this.$activeRequests[r];)r=(r+1)%1e9;this.$nextRequestId=r+1,this.$activeRequests[r]={onSuccess:n,onError:i};var o=JSON.stringify({method:t,args:e,tag:r});if(a){var s=function(t){var e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!0),e},u=[];u.push(s(16908802));var l=makeBlob([o]);u.push(s(l.size)),u.push(l);for(var d=0;d<a.length;d++)u.push(s(a[d].byteLength||a[d].size||0)),u.push(a[d]);o=makeBlob(u)}this.$sendMsg(o)},this.$sendMsg=function(t){this.$socket.readyState?this.$socket.send(t):this.$pendingMessages.push(t)},this.receiveError=function(t,e){var n,i;this.$errors[t]!==e&&(this.$errors[t]=e,delete this.$values[t],n=this.$bindings[t],(i=jQuery.Event("shiny:error")).name=t,i.error=e,i.binding=n,$(n?n.el:document).trigger(i),!i.isDefaultPrevented()&&n&&n.onValueError&&n.onValueError(i.error))},this.receiveOutput=function(t,e){var n=this.$bindings[t],i=jQuery.Event("shiny:value");if(i.name=t,i.value=e,i.binding=n,this.$values[t]!==e)return this.$values[t]=e,delete this.$errors[t],$(n?n.el:document).trigger(i),!i.isDefaultPrevented()&&n&&n.onValueChange(i.value),e;$(n?n.el:document).trigger(i)},this.bindOutput=function(t,e){if(!t)throw"Can't bind an element with no ID";if(this.$bindings[t])throw"Duplicate binding for ID "+t;return this.$bindings[t]=e,void 0!==this.$values[t]?e.onValueChange(this.$values[t]):void 0!==this.$errors[t]&&e.onValueError(this.$errors[t]),e},this.unbindOutput=function(t,e){return this.$bindings[t]===e&&(delete this.$bindings[t],!0)},this.$updateConditionals=function(){$(document).trigger({type:"shiny:conditional"});var t={};for(var e in this.$inputValues){this.$inputValues.hasOwnProperty(e)&&(t[e.replace(/:.*/,"")]=this.$inputValues[e])}for(var n={input:t,output:this.$values},i=$(document).find("[data-display-if]"),a=0;a<i.length;a++){var r=$(i[a]),o=r.data("data-display-if-func");o||(o=scopeExprToFunc(r.attr("data-display-if")),r.data("data-display-if-func",o));var s=o(narrowScope(n,r.attr("data-ns-prefix")));s!==("none"!==r.css("display"))&&(s?(r.trigger("show"),r.show(),r.trigger("shown")):(r.trigger("hide"),r.hide(),r.trigger("hidden")))}};var messageHandlerOrder=[],messageHandlers={},customMessageHandlerOrder=[],customMessageHandlers={};function addMessageHandler(t,e){if(messageHandlers[t])throw'handler for message of type "'+t+'" already added.';if("function"!=typeof e)throw"handler must be a function.";if(1!==e.length)throw"handler must be a function that takes one argument.";messageHandlerOrder.push(t),messageHandlers[t]=e}function addCustomMessageHandler(t,e){var n;if(!customMessageHandlers[t]||-1!==(n=customMessageHandlerOrder.indexOf(t))&&(customMessageHandlerOrder.splice(n,1),delete customMessageHandlers[t]),"function"!=typeof e)throw"handler must be a function.";if(1!==e.length)throw"handler must be a function that takes one argument.";customMessageHandlerOrder.push(t),customMessageHandlers[t]=e}function getTabset(t){var e=$("#"+$escape(t));if(0===e.length)throw"There is no tabsetPanel (or navbarPage or navlistPanel) with id equal to '"+t+"'";return e}function getTabContent(t){var e=t.attr("data-tabsetid");return $("div.tab-content[data-tabsetid='"+$escape(e)+"']")}function getTargetTabs(t,e,n){var i="[data-value='"+$escape(n)+"']",a=t.find("a"+i),r=a.parent();if(0===r.length)throw"There is no tabPanel (or navbarMenu) with value (or menuName) equal to '"+n+"'";var o,s,u,l=[],d=[];return"dropdown"===a.attr("data-toggle")?(s=(o=a.find("+ ul.dropdown-menu")).attr("data-tabsetid"),o.find("a[data-toggle='tab']").parent("li").each(function(t,e){l.push($(e))}),u="div.tab-pane[id^='tab-"+$escape(s)+"']",e.find(u).each(function(t,e){d.push($(e))})):d.push(e.find("div"+i)),{$liTag:r,$liTags:l,$divTags:d}}function ensureTabsetHasVisibleTab(t){var e,n,i;0===t.find("li.active").not(".dropdown").length&&(e=getFirstTab(t),n=t.data("shiny-input-binding"),(i=jQuery.Event("shiny:updateinput")).binding=n,t.trigger(i),n.setValue(t[0],e))}function getFirstTab(t){return t.find("li:visible a[data-toggle='tab']").first().attr("data-value")||null}function tabApplyFunction(t,n){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];$.each(t,function(t,e){"$liTag"===t?n(e):"$divTags"===t?$.each(e,function(t,e){n(e)}):i&&"$liTags"===t&&$.each(e,function(t,e){n(e)})})}exports.addCustomMessageHandler=addCustomMessageHandler,this.dispatchMessage=function(t){var e={};if("string"==typeof t)e=JSON.parse(t);else{for(var n=new DataView(t,0,1).getUint8(0),i=new DataView(t,1,n),a=[],r=0;r<n;r++)a.push(String.fromCharCode(i.getUint8(r)));var o=a.join("");t=t.slice(n+1),e.custom={},e.custom[o]=t}var s=jQuery.Event("shiny:message");s.message=e,$(document).trigger(s),s.isDefaultPrevented()||(this._sendMessagesToHandlers(s.message,messageHandlers,messageHandlerOrder),this.$updateConditionals())},this._sendMessagesToHandlers=function(t,e,n){for(var i=0;i<n.length;i++){var a=n[i];t.hasOwnProperty(a)&&e[a].call(this,t[a])}},addMessageHandler("values",function(t){for(var e in this.$bindings)this.$bindings.hasOwnProperty(e)&&this.$bindings[e].showProgress(!1);for(var n in t)t.hasOwnProperty(n)&&this.receiveOutput(n,t[n])}),addMessageHandler("errors",function(t){for(var e in t)t.hasOwnProperty(e)&&this.receiveError(e,t[e])}),addMessageHandler("inputMessages",function(t){for(var e=0;e<t.length;e++){var n,i,a=$(".shiny-bound-input#"+$escape(t[e].id)),r=a.data("shiny-input-binding");0<a.length&&(a.attr("aria-live")||a.attr("aria-live","polite"),n=a[0],(i=jQuery.Event("shiny:updateinput")).message=t[e].message,i.binding=r,$(n).trigger(i),i.isDefaultPrevented()||r.receiveMessage(n,i.message))}}),addMessageHandler("javascript",function(message){eval(message)}),addMessageHandler("console",function(t){for(var e=0;e<t.length;e++)console.log&&console.log(t[e])}),addMessageHandler("progress",function(t){var e;t.type&&t.message&&((e=progressHandlers[t.type])&&e.call(this,t.message))}),addMessageHandler("notification",function(t){if("show"===t.type)exports.notifications.show(t.message);else{if("remove"!==t.type)throw"Unkown notification type: "+t.type;exports.notifications.remove(t.message)}}),addMessageHandler("modal",function(t){if("show"===t.type)exports.modal.show(t.message);else{if("remove"!==t.type)throw"Unkown modal type: "+t.type;exports.modal.remove()}}),addMessageHandler("response",function(t){var e=t.tag,n=this.$activeRequests[e];n&&(delete this.$activeRequests[e],"value"in t?n.onSuccess(t.value):n.onError(t.error))}),addMessageHandler("allowReconnect",function(t){if(!0!==t&&!1!==t&&"force"!==t)throw"Invalid value for allowReconnect: "+t;this.$allowReconnect=t}),addMessageHandler("custom",function(t){exports.oncustommessage&&exports.oncustommessage(t),this._sendMessagesToHandlers(t,customMessageHandlers,customMessageHandlerOrder)}),addMessageHandler("config",function(t){this.config={workerId:t.workerId,sessionId:t.sessionId},t.user&&(exports.user=t.user),$(document).trigger("shiny:sessioninitialized")}),addMessageHandler("busy",function(t){"busy"===t?($(document.documentElement).addClass("shiny-busy"),$(document).trigger("shiny:busy")):"idle"===t&&($(document.documentElement).removeClass("shiny-busy"),$(document).trigger("shiny:idle"))}),addMessageHandler("recalculating",function(t){var e;t.hasOwnProperty("name")&&t.hasOwnProperty("status")&&(e=this.$bindings[t.name],$(e?e.el:null).trigger({type:"shiny:"+t.status}))}),addMessageHandler("reload",function(t){window.location.reload()}),addMessageHandler("shiny-insert-ui",function(n){var t=$(n.selector);0===t.length?(console.warn('The selector you chose ("'+n.selector+'") could not be found in the DOM.'),exports.renderHtml(n.content.html,$([]),n.content.deps)):t.each(function(t,e){return exports.renderContent(e,n.content,n.where),n.multiple})}),addMessageHandler("shiny-remove-ui",function(n){$(n.selector).each(function(t,e){return exports.unbindAll(e,!0),$(e).remove(),n.multiple})}),addMessageHandler("shiny-insert-tab",function(r){var t,e=getTabset(r.inputId),n=e,i=getTabContent(n),a=e.attr("data-tabsetid"),o=$(r.divTag.html),s=$(r.liTag.html),u=s.find("> a"),l=null;null!==r.target&&(t=getTargetTabs(n,i,r.target),l=t.$liTag);var d,c,p,h=function(){{if(null!==r.menuName){var t=$("a.dropdown-toggle[data-value='"+$escape(r.menuName)+"']");if(0===t.length)throw"There is no navbarMenu with menuName equal to '"+r.menuName+"'";var e=t.find("+ ul.dropdown-menu"),n=e.attr("data-tabsetid");return{$tabset:e,id:n}}if(null!==r.target){var i=l.parent("ul");if(i.hasClass("dropdown-menu")){var a=i.attr("data-tabsetid");return{$tabset:i,id:a}}}}return null}();if(null!==h){if("dropdown"===u.attr("data-toggle"))throw"Cannot insert a navbarMenu inside another one";n=h.$tabset,a=h.id}"tab"===u.attr("data-toggle")&&(d="tab-"+a+"-"+(c=a,p=[0],n.find("> li").each(function(){var t,e=$(this).find("> a[data-toggle='tab']");0<e.length&&(t=e.attr("href").replace(/.*(?=#[^\s]+$)/,"").replace("#tab-"+c+"-",""),p.push(Number(t)))}),Math.max.apply(null,p)+1),s.find("> a").attr("href","#"+d),o.attr("id",d)),"before"===r.position?l?l.before(s):n.append(s):"after"===r.position&&(l?l.after(s):n.prepend(s)),exports.renderContent(s[0],{html:s.html(),deps:r.liTag.deps}),exports.renderContent(i[0],{html:"",deps:r.divTag.deps},"beforeend"),o.get().forEach(function(t){i[0].appendChild(t),exports.renderContent(t,t.innerHTML||t.textContent)}),r.select&&s.find("a").tab("show")}),addMessageHandler("shiny-remove-tab",function(t){var e=getTabset(t.inputId);tabApplyFunction(getTargetTabs(e,getTabContent(e),t.target),function(t){exports.unbindAll(t,!0),t.remove()}),ensureTabsetHasVisibleTab(e)}),addMessageHandler("shiny-change-tab-visibility",function(e){var t=getTabset(e.inputId);tabApplyFunction(getTargetTabs(t,getTabContent(t),e.target),function(t){"show"===e.type?t.css("display",""):"hide"===e.type&&(t.hide(),t.removeClass("active"))},!0),ensureTabsetHasVisibleTab(t)}),addMessageHandler("updateQueryString",function(t){if("replace"!==t.mode){var e=null;if("#"===t.queryString.charAt(0))e="hash";else{if("?"!==t.queryString.charAt(0))throw"The 'query' string must start with either '?' (to update the query string) or with '#' (to update the hash).";e="query"}var n=window.location.pathname,i=window.location.search,a=window.location.hash,r=n;r+="query"===e?t.queryString:i+t.queryString,window.history.pushState(null,null,r),-1!==t.queryString.indexOf("#")&&(e="hash"),window.location.hash!==a&&(e="hash"),"hash"===e&&$(document).trigger("hashchange")}else window.history.replaceState(null,null,t.queryString)}),addMessageHandler("resetBrush",function(t){exports.resetBrush(t.brushId)});var progressHandlers={binding:function(t){var e=t.id,n=this.$bindings[e];n&&($(n.el).trigger({type:"shiny:outputinvalidated",binding:n,name:e}),n.showProgress&&n.showProgress(!0))},open:function(t){var e,n,i,a,r;"notification"===t.style?exports.notifications.show({html:'<div id="shiny-progress-'.concat(t.id,'" class="shiny-progress-notification">')+'<div class="progress active" style="display: none;"><div class="progress-bar"></div></div><div class="progress-text"><span class="progress-message">message</span> <span class="progress-detail"></span></div></div>',id:t.id,duration:null}):"old"===t.style&&(0===(e=$(".shiny-progress-container")).length&&(e=$('<div class="shiny-progress-container"></div>'),$(document.body).append(e)),n=$(".shiny-progress.open").length,(i=$('<div class="shiny-progress open"><div class="progress active"><div class="progress-bar bar"></div></div><div class="progress-text"><span class="progress-message">message</span><span class="progress-detail"></span></div></div>')).attr("id",t.id),e.append(i),(a=i.find(".progress")).css("top",n*a.height()+"px"),(r=i.find(".progress-text")).css("top",3*a.height()+n*r.outerHeight()+"px"),i.hide())},update:function(t){if("notification"===t.style){if(0===(e=$("#shiny-progress-"+t.id)).length)return;void 0!==t.message&&e.find(".progress-message").text(t.message),void 0!==t.detail&&e.find(".progress-detail").text(t.detail),void 0!==t.value&&null!==t.value&&(e.find(".progress").show(),e.find(".progress-bar").width(100*t.value+"%"))}else{var e;"old"===t.style&&(e=$("#"+t.id+".shiny-progress"),void 0!==t.message&&e.find(".progress-message").text(t.message),void 0!==t.detail&&e.find(".progress-detail").text(t.detail),void 0!==t.value&&null!==t.value&&(e.find(".progress").show(),e.find(".bar").width(100*t.value+"%")),e.fadeIn())}},close:function(t){var e;"notification"===t.style?exports.notifications.remove(t.id):"old"===t.style&&((e=$("#"+t.id+".shiny-progress")).removeClass("open"),e.fadeOut({complete:function(){e.remove(),0===$(".shiny-progress").length&&$(".shiny-progress-container").remove()}}))}};exports.progressHandlers=progressHandlers,this.getTestSnapshotBaseUrl=function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).fullUrl,e=void 0===t||t,n=window.location,i="";return e&&(i=n.origin+n.pathname.replace(/\/[^/]*$/,"")),i+="/session/"+encodeURIComponent(this.config.sessionId)+"/dataobj/shinytest?w="+encodeURIComponent(this.config.workerId)+"&nonce="+randomId()}}).call(ShinyApp.prototype),exports.showReconnectDialog=(Gg=null,function(t){Gg=(new Date).getTime()+t,0<$("#shiny-reconnect-text").length||(exports.notifications.show({id:"reconnect",html:'<span id="shiny-reconnect-text">Attempting to reconnect</span><span id="shiny-reconnect-time"></span>',action:'<a id="shiny-reconnect-now" href="#" onclick="Shiny.shinyapp.reconnect();">Try now</a>',duration:null,closeButton:!1,type:"warning"}),Hg())}),exports.hideReconnectDialog=function(){exports.notifications.remove("reconnect")},exports.notifications=(Ng=250,{show:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.html,n=void 0===e?"":e,i=t.action,a=void 0===i?"":i,r=t.deps,o=void 0===r?[]:r,s=t.duration,u=void 0===s?5e3:s,l=t.id,d=void 0===l?null:l,c=t.closeButton,p=void 0===c||c,h=t.type,g=void 0===h?null:h,d=d||randomId();0<Sg().length||$(document.body).append('<div id="shiny-notification-panel">');var f=Qg(d);0===f.length&&(f=function(e){var t=Qg(e);0===t.length&&((t=$('<div id="shiny-notification-'.concat(e,'" class="shiny-notification">')+'<div class="shiny-notification-close">&times;</div><div class="shiny-notification-content"></div></div>')).find(".shiny-notification-close").on("click",function(t){t.preventDefault(),t.stopPropagation(),Pg(e)}),Sg().append(t));return t}(d));var m='<div class="shiny-notification-content-text">'.concat(n,"</div>")+'<div class="shiny-notification-content-action">'.concat(a,"</div>"),v=f.find(".shiny-notification-content");exports.renderContent(v,{html:m,deps:o});var y=f.attr("class").split(/\s+/).filter(function(t){return t.match(/^shiny-notification-/)}).join(" ");f.removeClass(y),g&&"default"!==g&&f.addClass("shiny-notification-"+g);var b=f.find(".shiny-notification-close");return p&&0===b.length?f.append('<div class="shiny-notification-close">&times;</div>'):p||0===b.length||b.remove(),u?function(t,e){Wg(t);var n=setTimeout(function(){Pg(t)},e);Qg(t).data("removalCallback",n)}(d,u):Wg(d),d},remove:Pg}),exports.modal={show:function(t){var e=0<arguments.length&&void 0!==t?t:{},n=e.html,i=void 0===n?"":n,a=e.deps,r=void 0===a?[]:a;$(".modal-backdrop").remove();var o=$("#shiny-modal-wrapper");0===o.length&&(o=$('<div id="shiny-modal-wrapper"></div>'),$(document.body).append(o),o.on("hidden.bs.modal",function(t){t.target===$("#shiny-modal")[0]&&(exports.unbindAll(o),o.remove())})),o.on("keydown.shinymodal",function(t){!1!==$("#shiny-modal").data("keyboard")&&27===t.keyCode&&(t.stopPropagation(),t.preventDefault())}),exports.renderContent(o,{html:i,deps:r})},remove:function(){var t=$("#shiny-modal-wrapper");t.off("keydown.shinymodal"),0<t.find(".modal").length?t.find(".modal").modal("hide"):(exports.unbindAll(t),t.remove())}};var FileProcessor=function(t){this.files=t,this.fileIndex=-1,this.aborted=!1,this.completed=!1,this.$run()};(function(){this.onBegin=function(t,e){setTimeout(e,0)},this.onFile=function(t,e){setTimeout(e,0)},this.onComplete=function(){},this.onAbort=function(){},this.abort=function(){this.completed||this.aborted||(this.aborted=!0,this.onAbort())},this.$getRun=function(){var t=this,e=!1;return function(){e||(e=!0,t.$run())}},this.$run=function(){if(!this.aborted&&!this.completed){if(this.fileIndex<0)return this.fileIndex=0,void this.onBegin(this.files,this.$getRun());if(this.fileIndex===this.files.length)return this.completed=!0,void this.onComplete();var t=this.files[this.fileIndex++];this.onFile(t,this.$getRun())}}}).call(FileProcessor.prototype);var BindingRegistry=function(){this.bindings=[],this.bindingNames={}};(function(){this.register=function(t,e,n){var i={binding:t,priority:n||0};this.bindings.unshift(i),e&&(this.bindingNames[e]=i,t.name=e)},this.setPriority=function(t,e){var n=this.bindingNames[t];if(!n)throw"Tried to set priority on unknown binding "+t;n.priority=e||0},this.getPriority=function(t){var e=this.bindingNames[t];return!!e&&e.priority},this.getBindings=function(){return mergeSort(this.bindings,function(t,e){return e.priority-t.priority})}}).call(BindingRegistry.prototype);var inputBindings=exports.inputBindings=new BindingRegistry,outputBindings=exports.outputBindings=new BindingRegistry,OutputBinding=exports.OutputBinding=function(){};(function(){this.find=function(t){throw"Not implemented"},this.getId=function(t){return t["data-input-id"]||t.id},this.onValueChange=function(t,e){this.clearError(t),this.renderValue(t,e)},this.onValueError=function(t,e){this.renderError(t,e)},this.renderError=function(t,e){var n;this.clearError(t),""!==e.message?(n="shiny-output-error",null!==e.type&&(n=n+" "+$.map(asArray(e.type),function(t){return n+"-"+t}).join(" ")),$(t).addClass(n).text(e.message)):$(t).empty()},this.clearError=function(t){$(t).attr("class",function(t,e){return e.replace(/(^|\s)shiny-output-error\S*/g,"")})},this.showProgress=function(t,e){var n="recalculating";e?$(t).addClass(n):$(t).removeClass(n)}}).call(OutputBinding.prototype);var textOutputBinding=new OutputBinding;$.extend(textOutputBinding,{find:function(t){return $(t).find(".shiny-text-output")},renderValue:function(t,e){$(t).text(e)}}),outputBindings.register(textOutputBinding,"shiny.textOutput");var imageOutputBinding=new OutputBinding;$.extend(imageOutputBinding,{find:function(t){return $(t).find(".shiny-image-output, .shiny-plot-output")},renderValue:function(t,r){var n,o=this.getId(t),s=$(t),u=s.find("img");if(0===u.length?(n=document.createElement("img"),s.append(n),u=$(n)):(n=u[0],u.trigger("reset")),r){var l={clickId:s.data("click-id"),clickClip:a(strToBool(s.data("click-clip")),!0),dblclickId:s.data("dblclick-id"),dblclickClip:a(strToBool(s.data("dblclick-clip")),!0),dblclickDelay:a(s.data("dblclick-delay"),400),hoverId:s.data("hover-id"),hoverClip:a(strToBool(s.data("hover-clip")),!0),hoverDelayType:a(s.data("hover-delay-type"),"debounce"),hoverDelay:a(s.data("hover-delay"),300),hoverNullOutside:a(strToBool(s.data("hover-null-outside")),!1),brushId:s.data("brush-id"),brushClip:a(strToBool(s.data("brush-clip")),!0),brushDelayType:a(s.data("brush-delay-type"),"debounce"),brushDelay:a(s.data("brush-delay"),300),brushFill:a(s.data("brush-fill"),"#666"),brushStroke:a(s.data("brush-stroke"),"#000"),brushOpacity:a(s.data("brush-opacity"),.3),brushDirection:a(s.data("brush-direction"),"xy"),brushResetOnNew:a(strToBool(s.data("brush-reset-on-new")),!1),coordmap:r.coordmap};$.each(r,function(t,e){null!==e&&"coordmap"!==t&&("src"===t&&e===n.getAttribute("src")&&n.removeAttribute("src"),n.setAttribute(t,e))});for(var e=0;e<n.attributes.length;e++){var i=n.attributes[e];i.specified&&!r.hasOwnProperty(i.name)&&n.removeAttribute(i.name)}l.coordmap||(l.coordmap={panels:[],dims:{height:null,width:null}}),s.off(".image_output"),u.off(".image_output"),u.off("load.shiny_image_interaction"),u.one("load.shiny_image_interaction",function(){imageutils.initCoordmap(s,l.coordmap);var t,e,n,i,a=imageutils.createClickInfo(s,l.dblclickId,l.dblclickDelay);s.on("mousedown.image_output",a.mousedown),browser.isIE&&8===browser.IEVersion&&s.on("dblclick.image_output",a.dblclickIE8),l.clickId&&(imageutils.disableDrag(s,u),t=imageutils.createClickHandler(l.clickId,l.clickClip,l.coordmap),s.on("mousedown2.image_output",t.mousedown),s.on("resize.image_output",t.onResize),u.on("reset.image_output",t.onResetImg)),l.dblclickId&&(imageutils.disableDrag(s,u),e=imageutils.createClickHandler(l.dblclickId,l.clickClip,l.coordmap),s.on("dblclick2.image_output",e.mousedown),s.on("resize.image_output",e.onResize),u.on("reset.image_output",e.onResetImg)),l.hoverId&&(imageutils.disableDrag(s,u),n=imageutils.createHoverHandler(l.hoverId,l.hoverDelay,l.hoverDelayType,l.hoverClip,l.hoverNullOutside,l.coordmap),s.on("mousemove.image_output",n.mousemove),s.on("mouseout.image_output",n.mouseout),s.on("resize.image_output",n.onResize),u.on("reset.image_output",n.onResetImg)),l.brushId&&(imageutils.disableDrag(s,u),i=imageutils.createBrushHandler(l.brushId,s,l,l.coordmap,o),s.on("mousedown.image_output",i.mousedown),s.on("mousemove.image_output",i.mousemove),s.on("resize.image_output",i.onResize),u.on("reset.image_output",i.onResetImg)),(l.clickId||l.dblclickId||l.hoverId||l.brushId)&&s.addClass("crosshair"),r.error&&console.log("Error on server extracting coordmap: "+r.error)})}else s.empty();function a(t,e){return void 0===t?e:t}},renderError:function(t,e){$(t).find("img").trigger("reset"),OutputBinding.prototype.renderError.call(this,t,e)},clearError:function(t){$(t).contents().filter(function(){return"IMG"!==this.tagName&&this.id!==t.id+"_brush"}).remove(),OutputBinding.prototype.clearError.call(this,t)},resize:function(t){$(t).find("img").trigger("resize")}}),outputBindings.register(imageOutputBinding,"shiny.imageOutput");var imageutils={};function findScalingRatio(t){var e=t[0].getBoundingClientRect();return{x:e.width/t.outerWidth(),y:e.height/t.outerHeight()}}function findOrigin(t){var e=t.offset(),n=findScalingRatio(t),i=parseInt(t.css("border-left-width"))+parseInt(t.css("padding-left")),a=parseInt(t.css("border-top-width"))+parseInt(t.css("padding-top"));return{x:e.left+n.x*i,y:e.top+n.y*a}}function findDims(t){var e=t.width()/t.outerWidth(),n=t.height()/t.outerHeight(),i=t[0].getBoundingClientRect();return{x:e*i.width,y:n*i.height}}imageutils.disableDrag=function(t,e){e.css("-webkit-user-drag","none"),e.off("dragstart.image_output"),e.on("dragstart.image_output",function(){return!1}),t.off("selectstart.image_output"),t.on("selectstart.image_output",function(){return!1})},imageutils.initPanelScales=function(t){function u(t,e,n,i,a,r){var o,s,u=(t-e)*((a-i)/(n-e))+i;return(r=r||!0)&&(o=Math.max(a,i),s=Math.min(a,i),o<u?u=o:u<s&&(u=s)),u}function s(i,a,r,o,s){return{scale:function(t,e){return s&&(t=Math.log(t)/Math.log(s)),u(t,i,a,r,o,e)},scaleInv:function(t,e){var n=u(t,r,o,i,a,e);return s&&(n=Math.pow(s,n)),n}}}for(var e=0;e<t.length;e++){!function(i){var t=i.domain,e=i.range,n=i.log&&i.log.x?i.log.x:null,a=i.log&&i.log.y?i.log.y:null,r=s(t.left,t.right,e.left,e.right,n),o=s(t.bottom,t.top,e.bottom,e.top,a);i.scaleDataToImg=function(t,i){return mapValues(t,function(t,e){var n=e.substring(0,1);return"x"===n?r.scale(t,i):"y"===n?o.scale(t,i):null})},i.scaleImgToData=function(t,i){return mapValues(t,function(t,e){var n=e.substring(0,1);return"x"===n?r.scaleInv(t,i):"y"===n?o.scaleInv(t,i):null})},i.clipImg=function(t){var e={x:t.x,y:t.y},n=i.range;return t.x>n.right?e.x=n.right:t.x<n.left&&(e.x=n.left),t.y>n.bottom?e.y=n.bottom:t.y<n.top&&(e.y=n.top),e}}(t[e])}},imageutils.initCoordmap=function(t,f){var e,n=t.find("img"),i=n[0];0===f.panels.length&&(e={top:0,left:0,right:i.clientWidth-1,bottom:i.clientHeight-1},f.panels[0]={domain:e,range:e,mapping:{}}),f.dims.height=f.dims.height||i.naturalHeight,f.dims.width=f.dims.width||i.naturalWidth,imageutils.initPanelScales(f.panels),f.mouseOffsetCss=function(t){var e=findOrigin(n);return{x:t.pageX-e.x,y:t.pageY-e.y}},f.scaleCssToImg=function(i){var a=f.imgToCssScalingRatio();return mapValues(i,function(t,e){var n=e.substring(0,1);return"x"===n?i[e]/a.x:"y"===n?i[e]/a.y:null})},f.scaleImgToCss=function(i){var a=f.imgToCssScalingRatio();return mapValues(i,function(t,e){var n=e.substring(0,1);return"x"===n?i[e]*a.x:"y"===n?i[e]*a.y:null})},f.imgToCssScalingRatio=function(){var t=findDims(n);return{x:t.x/f.dims.width,y:t.y/f.dims.height}},f.cssToImgScalingRatio=function(){var t=f.imgToCssScalingRatio();return{x:1/t.x,y:1/t.y}},f.getPanelCss=function(t){for(var e,n,i,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=f.scaleCssToImg(t),o=r.x,s=r.y,u=f.cssToImgScalingRatio(),l=a*u.x,d=a*u.y,c=[],p=[],h=0;h<f.panels.length;h++){o<=(i=f.panels[h].range).right+l&&o>=i.left-l&&s<=i.bottom+d&&s>=i.top-d&&(c.push(f.panels[h]),n=e=0,o>i.right&&o<=i.right+l?e=o-i.right:o<i.left&&o>=i.left-l&&(e=o-i.left),s>i.bottom&&s<=i.bottom+d?n=s-i.bottom:s<i.top&&s>=i.top-d&&(n=s-i.top),p.push(Math.sqrt(Math.pow(e,2)+Math.pow(n,2))))}if(c.length)for(var g=Math.min.apply(null,p),h=0;h<c.length;h++)if(p[h]===g)return c[h];return null},f.isInPanelCss=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return!!f.getPanelCss(t,e)},f.mouseCoordinateSender=function(o,s,u){return void 0===s&&(s=!0),void 0===u&&(u=!1),function(t){if(null!==t){var e={},n=f.mouseOffsetCss(t);if(!f.isInPanelCss(n)){if(u)return void exports.setInputValue(o,null);if(s)return;return e.coords_css=n,e.coords_img=f.scaleCssToImg(n),void exports.setInputValue(o,e,{priority:"event"})}var i=f.getPanelCss(n),a=f.scaleCssToImg(n),r=i.scaleImgToData(a);e.x=r.x,e.y=r.y,e.coords_css=n,e.coords_img=a,e.img_css_ratio=f.cssToImgScalingRatio(),$.extend(e,i.panel_vars),e.mapping=i.mapping,e.domain=i.domain,e.range=i.range,e.log=i.log,exports.setInputValue(o,e,{priority:"event"})}else exports.setInputValue(o,null)}}},imageutils.findBox=function(t,e){return{xmin:Math.min(t.x,e.x),xmax:Math.max(t.x,e.x),ymin:Math.min(t.y,e.y),ymax:Math.max(t.y,e.y)}},imageutils.shiftToRange=function(t,e,n){t instanceof Array||(t=[t]);var i=Math.max.apply(null,t),a=Math.min.apply(null,t),r=0;n<i?r=n-i:a<e&&(r=e-a);for(var o=[],s=0;s<t.length;s++)o[s]=t[s]+r;return o},imageutils.createClickInfo=function(i,e,n){var a=null,r=null;function o(t,e){var n=$.Event(t,{which:e.which,pageX:e.pageX,pageY:e.pageY});i.trigger(n)}function s(){r&&(o("mousedown2",r),r=null)}function u(t){r=t,a=setTimeout(function(){s()},n)}return{mousedown:function(t){1===t.which&&(e?null===r?u(t):(clearTimeout(a),r&&2<Math.abs(r.pageX-t.pageX)||2<Math.abs(r.pageY-t.pageY)?(s(),u(t)):(r=null,o("dblclick2",t))):o("mousedown2",t))},dblclickIE8:function(t){t.which=1,o("dblclick2",t)}}},imageutils.createClickHandler=function(t,e,n){var i=n.mouseCoordinateSender(t,e);return{mousedown:function(t){1===t.which&&i(t)},onResetImg:function(){i(null)},onResize:null}},imageutils.createHoverHandler=function(t,e,n,i,a,r){var o=r.mouseCoordinateSender(t,i,a),s=new("throttle"===n?Throttler:Debouncer)(null,o,e),u=a?function(){s.normalCall(null)}:function(){};return{mousemove:function(t){s.normalCall(t)},mouseout:u,onResetImg:function(){s.immediateCall(null)},onResize:null}},imageutils.createBrushHandler=function(n,i,a,r,o){var e,s=imageutils.createBrush(i,a,r,20);function u(t){i.removeClass("crosshair grabbable grabbing ns-resize ew-resize nesw-resize nwse-resize"),t&&i.addClass(t)}function t(){var t=s.boundsData();if(isNaN(t.xmin))return exports.setInputValue(n,null),void imageOutputBinding.find(document).trigger("shiny-internal:brushed",{brushId:n,outputId:null});var e=s.getPanel();$.extend(t,e.panel_vars),t.coords_css=s.boundsCss(),t.coords_img=r.scaleCssToImg(t.coords_css),t.img_css_ratio=r.cssToImgScalingRatio(),t.mapping=e.mapping,t.domain=e.domain,t.range=e.range,t.log=e.log,t.direction=a.brushDirection,t.brushId=n,t.outputId=o,exports.setInputValue(n,t),i.data("mostRecentBrush",!0),imageOutputBinding.find(document).trigger("shiny-internal:brushed",t)}function l(t){s.brushTo(r.mouseOffsetCss(t)),e.normalCall()}function d(t){s.dragTo(r.mouseOffsetCss(t)),e.normalCall()}function c(t){s.resizeTo(r.mouseOffsetCss(t)),e.normalCall()}function p(t){if(1===t.which){if($(document).off("mousemove.image_brush").off("mouseup.image_brush"),s.up(r.mouseOffsetCss(t)),s.stopBrushing(),u("crosshair"),s.down().x===s.up().x&&s.down().y===s.up().y)return s.reset(),void e.immediateCall();e.isPending()&&e.immediateCall()}}function h(t){1===t.which&&($(document).off("mousemove.image_brush").off("mouseup.image_brush"),s.up(r.mouseOffsetCss(t)),s.stopDragging(),u("grabbable"),e.isPending()&&e.immediateCall())}function g(t){1===t.which&&($(document).off("mousemove.image_brush").off("mouseup.image_brush"),s.up(r.mouseOffsetCss(t)),s.stopResizing(),e.isPending()&&e.immediateCall())}return i.on("shiny-internal:brushed.image_output",function(t,e){e.brushId===n&&e.outputId!==o&&(i.data("mostRecentBrush",!1),s.reset())}),e=new("throttle"===a.brushDelayType?Throttler:Debouncer)(null,t,a.brushDelay),a.brushResetOnNew||i.data("mostRecentBrush")&&(s.importOldBrush(),e.immediateCall()),{mousedown:function(t){var e,n;s.isBrushing()||s.isDragging()||s.isResizing()||1===t.which&&(e=r.mouseOffsetCss(t),a.brushClip&&!r.isInPanelCss(e,20)||(s.up({x:NaN,y:NaN}),s.down(e),s.isInResizeArea(e)?(s.startResizing(e),$(document).on("mousemove.image_brush",c).on("mouseup.image_brush",g)):s.isInsideBrush(e)?(s.startDragging(e),u("grabbing"),$(document).on("mousemove.image_brush",d).on("mouseup.image_brush",h)):(n=r.getPanelCss(e,20),s.startBrushing(n.clipImg(r.scaleCssToImg(e))),$(document).on("mousemove.image_brush",l).on("mouseup.image_brush",p))))},mousemove:function(t){var e,n=r.mouseOffsetCss(t);s.isBrushing()||s.isDragging()||s.isResizing()||(s.isInResizeArea(n)?(e=s.whichResizeSides(n)).left&&e.top||e.right&&e.bottom?u("nwse-resize"):e.left&&e.bottom||e.right&&e.top?u("nesw-resize"):e.left||e.right?u("ew-resize"):(e.top||e.bottom)&&u("ns-resize"):s.isInsideBrush(n)?u("grabbable"):r.isInPanelCss(n,20)?u("crosshair"):u(null))},onResetImg:function(){a.brushResetOnNew&&i.data("mostRecentBrush")&&(s.reset(),e.immediateCall())},onResize:function(){s.onResize(),e.immediateCall()}}},imageutils.createBrush=function(r,l,o,t){var s=10,u=r[0],d=null,c={},p=o.scaleCssToImg,h=o.scaleImgToCss;function e(){c.brushing=!1,c.dragging=!1,c.resizing=!1,c.down={x:NaN,y:NaN},c.up={x:NaN,y:NaN},c.resizeSides={left:!1,right:!1,top:!1,bottom:!1},c.boundsCss={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},c.boundsData={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},c.panel=null,c.changeStartBounds={xmin:NaN,xmax:NaN,ymin:NaN,ymax:NaN},d&&d.remove()}function n(t){var e=c.boundsCss,n=e.xmin-s,i=e.xmax+s,a=e.ymin-s,r=e.ymax+s,o={left:!1,right:!1,top:!1,bottom:!1};return("xy"===l.brushDirection||"x"===l.brushDirection)&&t.y<=r&&t.y>=a&&(t.x<e.xmin&&t.x>=n?o.left=!0:t.x>e.xmax&&t.x<=i&&(o.right=!0)),("xy"===l.brushDirection||"y"===l.brushDirection)&&t.x<=i&&t.x>=n&&(t.y<e.ymin&&t.y>=a?o.top=!0:t.y>e.ymax&&t.y<=r&&(o.bottom=!0)),o}function g(t){if(void 0===t)return $.extend({},c.boundsCss);var e={x:t.xmin,y:t.ymin},n={x:t.xmax,y:t.ymax},i=c.panel,a=i.range;l.brushClip&&(e=h(i.clipImg(p(e))),n=h(i.clipImg(p(n)))),"xy"===l.brushDirection||("x"===l.brushDirection?(e.y=h({y:a.top}).y,n.y=h({y:a.bottom}).y):"y"===l.brushDirection&&(e.x=h({x:a.left}).x,n.x=h({x:a.right}).x)),c.boundsCss={xmin:e.x,xmax:n.x,ymin:e.y,ymax:n.y};var r=c.panel.scaleImgToData(p(e)),o=c.panel.scaleImgToData(p(n));c.boundsData=imageutils.findBox(r,o),c.boundsData=mapValues(c.boundsData,function(t){return roundSignif(t,14)}),d.data("bounds-data",c.boundsData),d.data("panel",c.panel)}function f(t){if(void 0===t)return $.extend({},c.boundsData);var e=mapValues(e=h(c.panel.scaleDataToImg(t)),function(t){return roundSignif(t,13)});g({xmin:Math.min(e.xmin,e.xmax),xmax:Math.max(e.xmin,e.xmax),ymin:Math.min(e.ymin,e.ymax),ymax:Math.max(e.ymin,e.ymax)})}function m(){var t=findOrigin(r.find("img")),e=c.boundsCss;d.offset({top:t.y+e.ymin,left:t.x+e.xmin}).outerWidth(e.xmax-e.xmin+1).outerHeight(e.ymax-e.ymin+1)}return e(),{reset:e,importOldBrush:function(){var t=r.find("#"+u.id+"_brush");if(0!==t.length){var e=t.data("bounds-data"),n=t.data("panel");if(e&&n){for(var i=0;i<o.panels.length;i++){var a=o.panels[i];if(equal(n.mapping,a.mapping)&&equal(n.panel_vars,a.panel_vars)){c.panel=o.panels[i];break}}null!==c.panel?(d=t,f(e),m()):t.remove()}}},isInsideBrush:function(t){var e=c.boundsCss;return t.x<=e.xmax&&t.x>=e.xmin&&t.y<=e.ymax&&t.y>=e.ymin},isInResizeArea:function(t){var e=n(t);return e.left||e.right||e.top||e.bottom},whichResizeSides:n,onResize:function(){var t=f();for(var e in t)if(isnan(t[e]))return;f(t),m()},boundsCss:g,boundsData:f,getPanel:function(){return c.panel},down:function(t){if(void 0===t)return c.down;c.down=t},up:function(t){if(void 0===t)return c.up;c.up=t},isBrushing:function(){return c.brushing},startBrushing:function(){c.brushing=!0,function(){d&&d.remove(),d=$(document.createElement("div")).attr("id",u.id+"_brush").css({"background-color":l.brushFill,opacity:l.brushOpacity,"pointer-events":"none",position:"absolute"}).hide();var t="1px solid "+l.brushStroke;"xy"===l.brushDirection?d.css({border:t}):"x"===l.brushDirection?d.css({"border-left":t,"border-right":t}):"y"===l.brushDirection&&d.css({"border-top":t,"border-bottom":t}),r.append(d),d.offset({x:0,y:0}).width(0).outerHeight(0)}(),c.panel=o.getPanelCss(c.down,t),g(imageutils.findBox(c.down,c.down)),m()},brushTo:function(t){g(imageutils.findBox(c.down,t)),d.show(),m()},stopBrushing:function(){c.brushing=!1,g(imageutils.findBox(c.down,c.up))},isDragging:function(){return c.dragging},startDragging:function(){c.dragging=!0,c.changeStartBounds=$.extend({},c.boundsCss)},dragTo:function(t){var e,n,i,a,r=t.x-c.down.x,o=t.y-c.down.y,s=c.changeStartBounds,u={xmin:s.xmin+r,xmax:s.xmax+r,ymin:s.ymin+o,ymax:s.ymax+o};l.brushClip&&(e=c.panel.range,i=[(n=p(u)).xmin,n.xmax],a=[n.ymin,n.ymax],i=imageutils.shiftToRange(i,e.left,e.right),a=imageutils.shiftToRange(a,e.top,e.bottom),u=h({xmin:i[0],xmax:i[1],ymin:a[0],ymax:a[1]})),g(u),m()},stopDragging:function(){c.dragging=!1},isResizing:function(){return c.resizing},startResizing:function(){c.resizing=!0,c.changeStartBounds=$.extend({},c.boundsCss),c.resizeSides=n(c.down)},resizeTo:function(t){var e,n,i,a,r={x:t.x-c.down.x,y:t.y-c.down.y},o=p(r),s=p(c.changeStartBounds),u=c.panel.range;c.resizeSides.left?(e=imageutils.shiftToRange(s.xmin+o.x,u.left,s.xmax)[0],s.xmin=e):c.resizeSides.right&&(n=imageutils.shiftToRange(s.xmax+o.x,s.xmin,u.right)[0],s.xmax=n),c.resizeSides.top?(i=imageutils.shiftToRange(s.ymin+o.y,u.top,s.ymax)[0],s.ymin=i):c.resizeSides.bottom&&(a=imageutils.shiftToRange(s.ymax+o.y,s.ymin,u.bottom)[0],s.ymax=a),g(h(s)),m()},stopResizing:function(){c.resizing=!1}}},exports.resetBrush=function(t){exports.setInputValue(t,null),imageOutputBinding.find(document).trigger("shiny-internal:brushed",{brushId:t,outputId:null})};var htmlOutputBinding=new OutputBinding;$.extend(htmlOutputBinding,{find:function(t){return $(t).find(".shiny-html-output")},onValueError:function(t,e){exports.unbindAll(t),this.renderError(t,e)},renderValue:function(t,e){exports.renderContent(t,e)}}),outputBindings.register(htmlOutputBinding,"shiny.htmlOutput");var renderDependencies=exports.renderDependencies=function(t){t&&$.each(t,function(t,e){renderDependency(e)})};exports.renderContent=function(t,e){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===i&&exports.unbindAll(t);var a=[];null===e?n="":"string"==typeof e?n=e:"object"===_typeof(e)&&(n=e.html,a=e.deps||[]),exports.renderHtml(n,t,a,i);var r,o,s=t;"replace"===i?(exports.initializeInputs(t),exports.bindAll(t)):(0<(r=$(t).parent()).length&&(s=r,"beforeBegin"!==i&&"afterEnd"!==i||0<(o=r.parent()).length&&(s=o)),exports.initializeInputs(s),exports.bindAll(s))},exports.renderHtml=function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"replace";return renderDependencies(n),singletons.renderHtml(t,e,i)};var htmlDependencies={};function registerDependency(t,e){htmlDependencies[t]=e}function renderDependency(n){if(!htmlDependencies.hasOwnProperty(n.name)){registerDependency(n.name,n.version);var t,e,i,a,r,o,s,u=n.src.href,l=$("head").first();return n.meta&&(t=$.map(asArray(n.meta),function(t,e){var n=Object.keys(t)[0];return $("<meta>").attr("name",n).attr("content",t[n])}),l.append(t)),n.stylesheet&&(e=$.map(asArray(n.stylesheet),function(t){return $("<link rel='stylesheet' type='text/css'>").attr("href",u+"/"+encodeURI(t))}),l.append(e)),n.script&&(i=$.map(asArray(n.script),function(t){return $("<script>").attr("src",u+"/"+encodeURI(t))}),l.append(i)),n.attachment&&("string"==typeof(a=n.attachment)&&(a=[a]),$.isArray(a)&&(r={},$.each(a,function(t,e){r[t+1+""]=e}),a=r),o=$.map(a,function(t,e){return $("<link rel='attachment'>").attr("id",n.name+"-"+e+"-attachment").attr("href",u+"/"+encodeURI(t))}),l.append(o)),n.head&&((s=$("<head></head>")).html(n.head),l.append(s.children())),1}}var singletons={knownSingletons:{},renderHtml:function(t,e,n){var i=this._processHtml(t);return this._addToHead(i.head),this.register(i.singletons),"replace"===n?$(e).html(i.html):e.insertAdjacentHTML(n,i.html),i},register:function(t){$.extend(this.knownSingletons,t)},registerNames:function(t){if("string"==typeof t)this.knownSingletons[t]=!0;else if(t instanceof Array)for(var e=0;e<t.length;e++)this.knownSingletons[t[e]]=!0},_addToHead:function(t){if(0<t.length)for(var e=$("<div>"+t+"</div>")[0],n=$("head");e.hasChildNodes();)n.append(e.firstChild)},_processHtml:function(t){for(var e,a=this,r={},n=function(t,e,n,i){return a.knownSingletons[n]||r[n]?"":(r[n]=!0,i)};e=t.replace(a._reSingleton,n),t.length!==e.length;)t=e;for(var i=[],o=function(t,e){return i.push(e),""};e=t.replace(a._reHead,o),t.length!==e.length;)t=e;return{html:t,head:i.join("\n"),singletons:r}},_reSingleton:/<!--(SHINY.SINGLETON\[([\w]+)\])-->([\s\S]*?)<!--\/\1-->/,_reHead:/<head(?:\s[^>]*)?>([\s\S]*?)<\/head>/},downloadLinkOutputBinding=new OutputBinding;$.extend(downloadLinkOutputBinding,{find:function(t){return $(t).find("a.shiny-download-link")},renderValue:function(t,e){$(t).attr("href",e)}}),outputBindings.register(downloadLinkOutputBinding,"shiny.downloadLink"),$(document).on("click.shinyDownloadLink","a.shiny-download-link",function(t){var e=jQuery.Event("shiny:filedownload");e.name=this.id,e.href=this.href,$(document).trigger(e)});var datatableOutputBinding=new OutputBinding;$.extend(datatableOutputBinding,{find:function(t){return $(t).find(".shiny-datatable-output")},onValueError:function(t,e){exports.unbindAll(t),this.renderError(t,e)},renderValue:function renderValue(el,_data){var $el=$(el).empty(),colnames,header,header,footer,content,searchCI,oTable,callback,searchInputs;_data&&_data.colnames&&(colnames=$.makeArray(_data.colnames),header=$.map(colnames,function(t){return"<th>"+t+"</th>"}).join(""),header="<thead><tr>"+header+"</tr></thead>",footer="",null!==_data.options&&!1===_data.options.searching||(footer=$.map(colnames,function(t){return'<th><input type="text" placeholder="'+escapeHTML(t.replace(/(<([^>]+)>)/gi,""))+'" /></th>'}).join(""),footer="<tfoot>"+footer+"</tfoot>"),content='<table class="table table-striped table-hover">'+header+footer+"</table>",$el.append(content),_data.evalOptions&&$.each(_data.evalOptions,function(i,x){_data.options[x]=eval("("+_data.options[x]+")")}),searchCI=null===_data.options||void 0===_data.options.search||!1!==_data.options.search.caseInsensitive,oTable=$(el).children("table").DataTable($.extend({processing:!0,serverSide:!0,order:[],orderClasses:!1,pageLength:25,ajax:{url:_data.action,type:"POST",data:function(t){t.search.caseInsensitive=searchCI,t.escape=_data.escape}}},_data.options)),"string"==typeof _data.callback&&(callback=eval("("+_data.callback+")"),"function"==typeof callback&&callback(oTable)),$el.find("label input").first().unbind("keyup").keyup(debounce(_data.searchDelay,function(){oTable.search(this.value).draw()})),searchInputs=$el.find("tfoot input"),0<searchInputs.length&&($.each(oTable.settings()[0].aoColumns,function(t,e){e.bSearchable||searchInputs.eq(t).hide()}),searchInputs.keyup(debounce(_data.searchDelay,function(){oTable.column(searchInputs.index(this)).search(this.value).draw()}))),$el.parents(".tab-content").css("overflow","visible"))}}),outputBindings.register(datatableOutputBinding,"shiny.datatableOutput");var OutputBindingAdapter=function(n,i){this.el=n,(this.binding=i).resize&&(this.onResize=makeResizeFilter(n,function(t,e){i.resize(n,t,e)}))};(function(){this.getId=function(){return this.binding.getId(this.el)},this.onValueChange=function(t){this.binding.onValueChange(this.el,t)},this.onValueError=function(t){this.binding.onValueError(this.el,t)},this.showProgress=function(t){this.binding.showProgress(this.el,t)},this.onResize=function(){}}).call(OutputBindingAdapter.prototype);var InputBinding=exports.InputBinding=function(){};(function(){this.find=function(t){throw"Not implemented"},this.getId=function(t){return t["data-input-id"]||t.id},this.getType=function(){return!1},this.getValue=function(t){throw"Not implemented"},this.subscribe=function(t,e){},this.unsubscribe=function(t){},this.receiveMessage=function(t,e){throw"Not implemented"},this.getState=function(t,e){throw"Not implemented"},this.getRatePolicy=function(){return null},this.initialize=function(t){},this.dispose=function(t){}}).call(InputBinding.prototype);var textInputBinding=new InputBinding;$.extend(textInputBinding,{find:function(t){return $(t).find('input[type="text"], input[type="search"], input[type="url"], input[type="email"]').not('input[type="text"][id$="-selectized"]')},getId:function(t){return InputBinding.prototype.getId.call(this,t)||t.name},getValue:function(t){return t.value},setValue:function(t,e){t.value=e},subscribe:function(t,e){$(t).on("keyup.textInputBinding input.textInputBinding",function(t){e(!0)}),$(t).on("change.textInputBinding",function(t){e(!1)})},unsubscribe:function(t){$(t).off(".textInputBinding")},receiveMessage:function(t,e){e.hasOwnProperty("value")&&this.setValue(t,e.value),updateLabel(e.label,this._getLabelNode(t)),e.hasOwnProperty("placeholder")&&(t.placeholder=e.placeholder),$(t).trigger("change")},getState:function(t){return{label:this._getLabelNode(t).text(),value:t.value,placeholder:t.placeholder}},getRatePolicy:function(){return{policy:"debounce",delay:250}},_getLabelNode:function(t){return $(t).parent().find('label[for="'+$escape(t.id)+'"]')}}),inputBindings.register(textInputBinding,"shiny.textInput");var textareaInputBinding={};$.extend(textareaInputBinding,textInputBinding,{find:function(t){return $(t).find("textarea")}}),inputBindings.register(textareaInputBinding,"shiny.textareaInput");var passwordInputBinding={};$.extend(passwordInputBinding,textInputBinding,{find:function(t){return $(t).find('input[type="password"]')},getType:function(){return"shiny.password"}}),inputBindings.register(passwordInputBinding,"shiny.passwordInput");var numberInputBinding={};$.extend(numberInputBinding,textInputBinding,{find:function(t){return $(t).find('input[type="number"]')},getValue:function(t){var e=$(t).val();return/^\s*$/.test(e)?null:isNaN(e)?e:+e},setValue:function(t,e){t.value=e},getType:function(){return"shiny.number"},receiveMessage:function(t,e){e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty("min")&&(t.min=e.min),e.hasOwnProperty("max")&&(t.max=e.max),e.hasOwnProperty("step")&&(t.step=e.step),updateLabel(e.label,this._getLabelNode(t)),$(t).trigger("change")},getState:function(t){return{label:this._getLabelNode(t).text(),value:this.getValue(t),min:Number(t.min),max:Number(t.max),step:Number(t.step)}},_getLabelNode:function(t){return $(t).parent().find('label[for="'+$escape(t.id)+'"]')}}),inputBindings.register(numberInputBinding,"shiny.numberInput");var checkboxInputBinding=new InputBinding;function forceIonSliderUpdate(t){t.$cache&&t.$cache.input?t.$cache.input.trigger("change"):console.log("Couldn't force ion slider to update")}function getTypePrettifyer(t,e,n){var i,a="date"===t?(i=strftime.utc(),function(t){return i(e,new Date(t))}):"datetime"===t?(i=n?strftime.timezone(n):strftime,function(t){return i(e,new Date(t))}):function(t){return formatNumber(t,this.prettify_separator)};return a}$.extend(checkboxInputBinding,{find:function(t){return $(t).find('input[type="checkbox"]')},getValue:function(t){return t.checked},setValue:function(t,e){t.checked=e},subscribe:function(t,e){$(t).on("change.checkboxInputBinding",function(t){e(!0)})},unsubscribe:function(t){$(t).off(".checkboxInputBinding")},getState:function(t){return{label:$(t).parent().find("span").text(),value:t.checked}},receiveMessage:function(t,e){e.hasOwnProperty("value")&&(t.checked=e.value),e.hasOwnProperty("label")&&$(t).parent().find("span").text(e.label),$(t).trigger("change")}}),inputBindings.register(checkboxInputBinding,"shiny.checkboxInput");var sliderInputBinding={};function formatNumber(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:",",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:".",i=t.toString().split(".");return i[0]=i[0].replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+e),1===i.length?i[0]:2===i.length?i[0]+n+i[1]:""}$.extend(sliderInputBinding,textInputBinding,{find:function(t){return $.fn.ionRangeSlider?$(t).find("input.js-range-slider"):[]},getType:function(t){var e=$(t).data("data-type");return"date"===e?"shiny.date":"datetime"===e&&"shiny.datetime"},getValue:function(t){var e=$(t),n=$(t).data("ionRangeSlider").result,i=e.data("data-type"),a="date"===i?function(t){return formatDateUTC(new Date(+t))}:"datetime"===i?function(t){return t/1e3}:function(t){return+t};return 2===this._numValues(t)?[a(n.from),a(n.to)]:a(n.from)},setValue:function(t,e){var n=$(t),i=n.data("ionRangeSlider");n.data("immediate",!0);try{2===this._numValues(t)&&e instanceof Array?i.update({from:e[0],to:e[1]}):i.update({from:e}),forceIonSliderUpdate(i)}finally{n.data("immediate",!1)}},subscribe:function(e,n){$(e).on("change.sliderInputBinding",function(t){n(!$(e).data("immediate")&&!$(e).data("animating"))})},unsubscribe:function(t){$(t).off(".sliderInputBinding")},receiveMessage:function(t,e){var n=$(t),i=n.data("ionRangeSlider"),a={};e.hasOwnProperty("value")&&(2===this._numValues(t)&&e.value instanceof Array?(a.from=e.value[0],a.to=e.value[1]):a.from=e.value);for(var r=["min","max","step"],o=0;o<r.length;o++){var s=r[o];e.hasOwnProperty(s)&&(a[s]=e[s])}updateLabel(e.label,this._getLabelNode(t));for(var u=["data-type","time-format","timezone"],o=0;o<u.length;o++){var l=u[o];e.hasOwnProperty(l)&&n.data(l,e[l])}var d=n.data("data-type"),c=n.data("time-format"),p=n.data("timezone");a.prettify=getTypePrettifyer(d,c,p),n.data("immediate",!0);try{i.update(a),forceIonSliderUpdate(i)}finally{n.data("immediate",!1)}},getRatePolicy:function(){return{policy:"debounce",delay:250}},getState:function(){},initialize:function(t){var e={},n=$(t),i=n.data("data-type"),a=n.data("time-format"),r=n.data("timezone");e.prettify=getTypePrettifyer(i,a,r),n.ionRangeSlider(e)},_getLabelNode:function(t){return $(t).parent().find('label[for="'+$escape(t.id)+'"]')},_numValues:function(t){return"double"===$(t).data("ionRangeSlider").options.type?2:1}}),inputBindings.register(sliderInputBinding,"shiny.sliderInput"),$(document).on("click",".slider-animate-button",function(t){t.preventDefault();var e,n,i,a,r=$(this),o=$("#"+$escape(r.attr("data-target-id"))),s=void 0!==r.attr("data-loop")&&!/^\s*false\s*$/i.test(r.attr("data-loop")),u=r.attr("data-interval"),u=isNaN(u)?1500:+u;o.data("animTimer")?(clearTimeout(o.data("animTimer")),o.removeData("animTimer"),r.attr("title","Play"),r.removeClass("playing"),o.removeData("animating")):(a=o.hasClass("jslider")?((e=o.slider()).canStepNext()||e.resetToStart(),setInterval(function(){s&&!e.canStepNext()?e.resetToStart():(e.stepNext(),s||e.canStepNext()||r.click())},u)):(e=o.data("ionRangeSlider"),i=function(){var t={from:e.result.min};"double"===e.options.type&&(t.to=t.from+(e.result.to-e.result.from)),e.update(t),forceIonSliderUpdate(e)},(n=function(){return"double"===e.options.type?e.result.to<e.result.max:e.result.from<e.result.max})()||i(),setInterval(function(){var t;s&&!n()?i():(t={from:Math.min(e.result.max,e.result.from+e.options.step)},"double"===e.options.type&&(t.to=Math.min(e.result.max,e.result.to+e.options.step)),e.update(t),forceIonSliderUpdate(e),s||n()||r.click())},u)),o.data("animTimer",a),r.attr("title","Pause"),r.addClass("playing"),o.data("animating",!0))});var dateInputBinding=new InputBinding;$.extend(dateInputBinding,{find:function(t){return $(t).find(".shiny-date-input")},getType:function(){return"shiny.date"},getValue:function(t){return formatDateUTC($(t).find("input").bsDatepicker("getUTCDate"))},setValue:function(t,e){var n;null!==e?(n=this._newDate(e),isNaN(n)||$(t).find("input").bsDatepicker("setUTCDate",n)):$(t).find("input").val("").bsDatepicker("update")},getState:function(t){var e=$(t).find("input"),n=e.data("datepicker").startDate,i=e.data("datepicker").endDate,n=n===-1/0?null:formatDateUTC(n),i=i===1/0?null:formatDateUTC(i),a=e.data("datepicker").startViewMode;return 2===a?a="decade":1===a?a="year":0===a&&(a="month"),{label:this._getLabelNode(t).text(),value:this.getValue(t),valueString:e.val(),min:n,max:i,language:e.data("datepicker").language,weekstart:e.data("datepicker").weekStart,format:this._formatToString(e.data("datepicker").format),startview:a}},receiveMessage:function(t,e){var n=$(t).find("input");updateLabel(e.label,this._getLabelNode(t)),e.hasOwnProperty("min")&&this._setMin(n[0],e.min),e.hasOwnProperty("max")&&this._setMax(n[0],e.max),e.hasOwnProperty("value")&&this.setValue(t,e.value),$(t).trigger("change")},subscribe:function(t,e){$(t).on("keyup.dateInputBinding input.dateInputBinding",function(t){e(!0)}),$(t).on("changeDate.dateInputBinding change.dateInputBinding",function(t){e(!1)})},unsubscribe:function(t){$(t).off(".dateInputBinding")},getRatePolicy:function(){return{policy:"debounce",delay:250}},initialize:function(t){var e=$(t).find("input"),n=e.data("initial-date");null==n&&(n=this._dateAsUTC(new Date)),this.setValue(t,n),void 0!==e.data("min-date")&&this._setMin(e[0],e.data("min-date")),void 0!==e.data("max-date")&&this._setMax(e[0],e.data("max-date"))},_getLabelNode:function(t){return $(t).find('label[for="'+$escape(t.id)+'"]')},_formatToString:function(t){for(var e="",n=0;n<t.parts.length;n++)e+=t.separators[n]+t.parts[n];return e+=t.separators[n]},_setMin:function(t,e){var n;void 0!==e&&(null!==e?null!==(e=this._newDate(e))&&(e=this._UTCDateAsLocal(e),isNaN(e)||(n=$(t).bsDatepicker("getUTCDate"),$(t).bsDatepicker("setStartDate",e),$(t).bsDatepicker("setUTCDate",n),"function"==typeof e.toDateString&&"function"==typeof n.toDateString&&e.toDateString()===n.toDateString()&&($(t).bsDatepicker("setStartDate",null),$(t).bsDatepicker("setUTCDate",n),$(t).bsDatepicker("setStartDate",e)))):$(t).bsDatepicker("setStartDate",null))},_setMax:function(t,e){var n;void 0!==e&&(null!==e?null!==(e=this._newDate(e))&&(e=this._UTCDateAsLocal(e),isNaN(e)||(n=$(t).bsDatepicker("getUTCDate"),$(t).bsDatepicker("setEndDate",e),$(t).bsDatepicker("setUTCDate",n),"function"==typeof e.toDateString&&"function"==typeof n.toDateString&&e.toDateString()===n.toDateString()&&($(t).bsDatepicker("setEndDate",null),$(t).bsDatepicker("setUTCDate",n),$(t).bsDatepicker("setEndDate",e)))):$(t).bsDatepicker("setEndDate",null))},_newDate:function(t){if(t instanceof Date)return t;if(!t)return null;var e=parseDate(t);return isNaN(e)?null:new Date(e.getTime())},_dateAsUTC:function(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset())},_UTCDateAsLocal:function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())}}),inputBindings.register(dateInputBinding,"shiny.dateInput");var dateRangeInputBinding={};$.extend(dateRangeInputBinding,dateInputBinding,{find:function(t){return $(t).find(".shiny-date-range-input")},getValue:function(t){var e=$(t).find("input"),n=e.eq(0).bsDatepicker("getUTCDate"),i=e.eq(1).bsDatepicker("getUTCDate");return[formatDateUTC(n),formatDateUTC(i)]},setValue:function(t,e){var n,i,a;e instanceof Object&&(n=$(t).find("input"),void 0!==e.start&&(null===e.start?n.eq(0).val("").bsDatepicker("update"):(i=this._newDate(e.start),n.eq(0).bsDatepicker("setUTCDate",i))),void 0!==e.end&&(null===e.end?n.eq(1).val("").bsDatepicker("update"):(a=this._newDate(e.end),n.eq(1).bsDatepicker("setUTCDate",a))))},getState:function(t){var e=$(t).find("input"),n=e.eq(0),i=e.eq(1),a=n.bsDatepicker("getStartDate"),r=n.bsDatepicker("getEndDate"),a=a===-1/0?null:formatDateUTC(a),r=r===1/0?null:formatDateUTC(r),o=n.data("datepicker").startView;return 2===o?o="decade":1===o?o="year":0===o&&(o="month"),{label:this._getLabelNode(t).text(),value:this.getValue(t),valueString:[n.val(),i.val()],min:a,max:r,weekstart:n.data("datepicker").weekStart,format:this._formatToString(n.data("datepicker").format),language:n.data("datepicker").language,startview:o}},receiveMessage:function(t,e){var n=$(t),i=n.find("input"),a=i.eq(0),r=i.eq(1);updateLabel(e.label,this._getLabelNode(t)),e.hasOwnProperty("min")&&(this._setMin(a[0],e.min),this._setMin(r[0],e.min)),e.hasOwnProperty("max")&&(this._setMax(a[0],e.max),this._setMax(r[0],e.max)),e.hasOwnProperty("value")&&this.setValue(t,e.value),n.trigger("change")},initialize:function(t){var e=$(t).find("input"),n=e.eq(0),i=e.eq(1),a=n.data("initial-date"),r=i.data("initial-date");null==a&&(a=this._dateAsUTC(new Date)),null==r&&(r=this._dateAsUTC(new Date)),this.setValue(t,{start:a,end:r}),this._setMin(n[0],n.data("min-date")),this._setMin(i[0],n.data("min-date")),this._setMax(n[0],i.data("max-date")),this._setMax(i[0],i.data("max-date"))},subscribe:function(t,e){$(t).on("keyup.dateRangeInputBinding input.dateRangeInputBinding",function(t){e(!0)}),$(t).on("changeDate.dateRangeInputBinding change.dateRangeInputBinding",function(t){e(!1)})},unsubscribe:function(t){$(t).off(".dateRangeInputBinding")},_getLabelNode:function(t){return $(t).find('label[for="'+$escape(t.id)+'"]')}}),inputBindings.register(dateRangeInputBinding,"shiny.dateRangeInput");var selectInputBinding=new InputBinding;$.extend(selectInputBinding,{find:function(t){return $(t).find("select")},getType:function(t){var e=$(t);return e.hasClass("symbol")?"multiple"===e.attr("multiple")?"shiny.symbolList":"shiny.symbol":null},getId:function(t){return InputBinding.prototype.getId.call(this,t)||t.name},getValue:function(t){return $(t).val()},setValue:function(t,e){var n;this._is_selectize(t)?(n=this._selectize(t))&&n.setValue(e):$(t).val(e)},getState:function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]={value:t[n].value,label:t[n].label};return{label:this._getLabelNode(t),value:this.getValue(t),options:e}},receiveMessage:function(t,n){var r,i,e=$(t);n.hasOwnProperty("options")&&((r=this._selectize(t))&&r.destroy(),e.empty().append(n.options),this._selectize(t)),n.hasOwnProperty("config")&&(e.parent().find('script[data-for="'+$escape(t.id)+'"]').replaceWith(n.config),this._selectize(t,!0)),n.hasOwnProperty("url")?((r=this._selectize(t)).clearOptions(),i=!1,r.settings.load=function(t,e){var a=r.settings;$.ajax({url:n.url,data:{query:t,field:JSON.stringify([a.searchField]),value:a.valueField,conju:a.searchConjunction,maxop:a.maxOptions},type:"GET",error:function(){e()},success:function(t){$.each(t,function(t,e){var n=e[a.optgroupField||"optgroup"],i={};i[a.optgroupLabelField||"label"]=n,i[a.optgroupValueField||"value"]=n,r.addOptionGroup(n,i)}),e(t),i||(n.hasOwnProperty("value")?r.setValue(n.value):1===a.maxItems&&r.setValue(t[0].value)),i=!0}})},r.load(function(t){r.settings.load.apply(r,["",t])})):n.hasOwnProperty("value")&&this.setValue(t,n.value),updateLabel(n.label,this._getLabelNode(t)),$(t).trigger("change")},subscribe:function(e,n){var i=this;$(e).on("change.selectInputBinding",function(t){e.nonempty&&""===i.getValue(e)||n()})},unsubscribe:function(t){$(t).off(".selectInputBinding")},initialize:function(t){this._selectize(t)},_getLabelNode:function(t){var e=$escape(t.id);return this._is_selectize(t)&&(e+="-selectized"),$(t).parent().parent().find('label[for="'+e+'"]')},_is_selectize:function(t){return 0<$(t).parent().find('script[data-for="'+$escape(t.id)+'"]').length},_selectize:function _selectize(el,update){if($.fn.selectize){var $el=$(el),config=$el.parent().find('script[data-for="'+$escape(el.id)+'"]');if(0!==config.length){var options=$.extend({labelField:"label",valueField:"value",searchField:["label"]},JSON.parse(config.html()));void 0!==config.data("nonempty")?(el.nonempty=!0,options=$.extend(options,{onItemRemove:function(t){""===this.getValue()&&$("select#"+$escape(el.id)).empty().append($("<option/>",{value:t,selected:!0})).trigger("change")},onDropdownClose:function(){""===this.getValue()&&this.setValue($("select#"+$escape(el.id)).val())}})):el.nonempty=!1,config.data("eval")instanceof Array&&$.each(config.data("eval"),function(i,x){options[x]=eval("("+options[x]+")")});var control=$el.selectize(options)[0].selectize,settings;return update&&(settings=$.extend(control.settings,options),control.destroy(),control=$el.selectize(settings)[0].selectize),control}}}}),inputBindings.register(selectInputBinding,"shiny.selectInput");var radioInputBinding=new InputBinding;$.extend(radioInputBinding,{find:function(t){return $(t).find(".shiny-input-radiogroup")},getValue:function(t){return $('input:radio[name="'+$escape(t.id)+'"]:checked').val()},setValue:function(t,e){$('input:radio[name="'+$escape(t.id)+'"][value="'+$escape(e)+'"]').prop("checked",!0)},getState:function(t){for(var e=$('input:radio[name="'+$escape(t.id)+'"]'),n=new Array(e.length),i=0;i<n.length;i++)n[i]={value:e[i].value,label:this._getLabel(e[i])};return{label:this._getLabelNode(t).text(),value:this.getValue(t),options:n}},receiveMessage:function(t,e){var n=$(t);e.hasOwnProperty("options")&&(n.find("div.shiny-options-group").remove(),n.find("label.radio").remove(),n.append(e.options)),e.hasOwnProperty("value")&&this.setValue(t,e.value),updateLabel(e.label,this._getLabelNode(t)),$(t).trigger("change")},subscribe:function(t,e){$(t).on("change.radioInputBinding",function(t){e()})},unsubscribe:function(t){$(t).off(".radioInputBinding")},_getLabelNode:function(t){return $(t).parent().find('label[for="'+$escape(t.id)+'"]')},_getLabel:function(t){return"LABEL"===t.parentNode.tagName?$(t.parentNode).find("span").text().trim():null},_setLabel:function(t,e){return"LABEL"===t.parentNode.tagName&&$(t.parentNode).find("span").text(e),null}}),inputBindings.register(radioInputBinding,"shiny.radioInput");var checkboxGroupInputBinding=new InputBinding;$.extend(checkboxGroupInputBinding,{find:function(t){return $(t).find(".shiny-input-checkboxgroup")},getValue:function(t){for(var e=$('input:checkbox[name="'+$escape(t.id)+'"]:checked'),n=new Array(e.length),i=0;i<e.length;i++)n[i]=e[i].value;return n},setValue:function(t,e){if($('input:checkbox[name="'+$escape(t.id)+'"]').prop("checked",!1),e instanceof Array)for(var n=0;n<e.length;n++)$('input:checkbox[name="'+$escape(t.id)+'"][value="'+$escape(e[n])+'"]').prop("checked",!0);else $('input:checkbox[name="'+$escape(t.id)+'"][value="'+$escape(e)+'"]').prop("checked",!0)},getState:function(t){for(var e=$('input:checkbox[name="'+$escape(t.id)+'"]'),n=new Array(e.length),i=0;i<n.length;i++)n[i]={value:e[i].value,label:this._getLabel(e[i])};return{label:this._getLabelNode(t).text(),value:this.getValue(t),options:n}},receiveMessage:function(t,e){var n=$(t);e.hasOwnProperty("options")&&(n.find("div.shiny-options-group").remove(),n.find("label.checkbox").remove(),n.append(e.options)),e.hasOwnProperty("value")&&this.setValue(t,e.value),updateLabel(e.label,this._getLabelNode(t)),$(t).trigger("change")},subscribe:function(t,e){$(t).on("change.checkboxGroupInputBinding",function(t){e()})},unsubscribe:function(t){$(t).off(".checkboxGroupInputBinding")},_getLabelNode:function(t){return $(t).find('label[for="'+$escape(t.id)+'"]')},_getLabel:function(t){return"LABEL"===t.parentNode.tagName?$(t.parentNode).find("span").text().trim():null},_setLabel:function(t,e){return"LABEL"===t.parentNode.tagName&&$(t.parentNode).find("span").text(e),null}}),inputBindings.register(checkboxGroupInputBinding,"shiny.checkboxGroupInput");var actionButtonInputBinding=new InputBinding;$.extend(actionButtonInputBinding,{find:function(t){return $(t).find(".action-button")},getValue:function(t){return $(t).data("val")||0},setValue:function(t,e){$(t).data("val",e)},getType:function(){return"shiny.action"},subscribe:function(t,i){$(t).on("click.actionButtonInputBinding",function(t){var e=$(this),n=e.data("val")||0;e.data("val",n+1),i()})},getState:function(t){return{value:this.getValue(t)}},receiveMessage:function(t,e){var n,i=$(t),a=i.text(),r="";0<i.find("i[class]").length&&((n=i.find("i[class]")[0])===i.children()[0]&&(r=$(n).prop("outerHTML"))),e.hasOwnProperty("label")&&(a=e.label),e.hasOwnProperty("icon")&&0===(r=e.icon).length&&(r=""),i.html(r+" "+a)},unsubscribe:function(t){$(t).off(".actionButtonInputBinding")}}),inputBindings.register(actionButtonInputBinding,"shiny.actionButtonInput"),$(document).on("click","a.action-button",function(t){t.preventDefault()});var bootstrapTabInputBinding=new InputBinding;$.extend(bootstrapTabInputBinding,{find:function(t){return $(t).find("ul.nav.shiny-tab-input")},getValue:function(t){var e=$(t).find("li:not(.dropdown).active").children("a");return 1===e.length?this._getTabName(e):null},setValue:function(t,e){var n=this,i=!1;e&&$(t).find("li:not(.dropdown)").children("a").each(function(){return n._getTabName($(this))!==e||($(this).tab("show"),!(i=!0))}),i||$(t).trigger("change")},getState:function(t){return{value:this.getValue(t)}},receiveMessage:function(t,e){e.hasOwnProperty("value")&&this.setValue(t,e.value)},subscribe:function(t,e){$(t).on("change shown.bootstrapTabInputBinding shown.bs.tab.bootstrapTabInputBinding",function(t){e()})},unsubscribe:function(t){$(t).off(".bootstrapTabInputBinding")},_getTabName:function(t){return t.attr("data-value")||t.text()}}),inputBindings.register(bootstrapTabInputBinding,"shiny.bootstrapTabInput");var IE8FileUploader=function(t,e,n){this.shinyapp=t,this.id=e,this.fileEl=n,this.beginUpload()};(function(){this.beginUpload=function(){var t=this,e="shinyupload_iframe_"+this.id;this.iframe=document.createElement("iframe"),this.iframe.id=e,this.iframe.name=e,this.iframe.setAttribute("style","position: fixed; top: 0; left: 0; width: 0; height: 0; border: none"),$(document.body).append(this.iframe);function n(){t.shinyapp.makeRequest("uploadieFinish",[],function(){},function(){}),$(t.iframe).remove(),$(t.fileEl).val("")}this.iframe.attachEvent?this.iframe.attachEvent("onload",n):this.iframe.onload=n,this.form=document.createElement("form"),this.form.method="POST",this.form.setAttribute("enctype","multipart/form-data"),this.form.action="session/"+encodeURI(this.shinyapp.config.sessionId)+"/uploadie/"+encodeURI(this.id),this.form.id="shinyupload_form_"+this.id,this.form.target=e,$(this.form).insertAfter(this.fileEl).append(this.fileEl),this.form.submit()}}).call(IE8FileUploader.prototype);var FileUploader=function(t,e,n,i){this.shinyapp=t,this.id=e,this.el=i,FileProcessor.call(this,n)};function setFileText(t,e){var n=t.closest("div.input-group").find("input[type=text]");1===e.length?n.val(e[0].name):n.val(e.length+" files")}function abortCurrentUpload(t){var e=t.data("currentUploader");e&&e.abort(),t.removeAttr("data-restore")}function uploadDroppedFilesIE10Plus(t,e){var n=$(t);abortCurrentUpload(n),setFileText(n,e),n.data("currentUploader",new FileUploader(exports.shinyapp,fileInputBinding.getId(t),e,t))}function uploadFiles(t){var e=$(t.target);abortCurrentUpload(e);var n,i=t.target.files,a=void 0===i,r=fileInputBinding.getId(t.target);!a&&0===i.length||(n=e.closest("div.input-group").find("input[type=text]"),a?n.val("[Uploaded file]"):setFileText(e,i),a?new IE8FileUploader(exports.shinyapp,r,t.target):e.data("currentUploader",new FileUploader(exports.shinyapp,r,i,t.target)))}$.extend(FileUploader.prototype,FileProcessor.prototype),function(){this.makeRequest=function(t,e,n,i,a){this.shinyapp.makeRequest(t,e,n,i,a)},this.onBegin=function(t,e){var n=this;this.$setError(null),this.$setActive(!0),this.$setVisible(!0),this.onProgress(null,0),this.totalBytes=0,this.progressBytes=0,$.each(t,function(t,e){n.totalBytes+=e.size});var i=$.map(t,function(t,e){return{name:t.name,size:t.size,type:t.type}});this.makeRequest("uploadInit",[i],function(t){n.jobId=t.jobId,n.uploadUrl=t.uploadUrl,e()},function(t){n.onError(t)})},this.onFile=function(e,t){var n=this;this.onProgress(e,0),$.ajax(this.uploadUrl,{type:"POST",cache:!1,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&(t.upload.onprogress=function(t){t.lengthComputable&&n.onProgress(e,(n.progressBytes+t.loaded)/n.totalBytes)}),t},data:e,contentType:"application/octet-stream",processData:!1,success:function(){n.progressBytes+=e.size,t()},error:function(t,e){n.onError(t.responseText||e)}})},this.onComplete=function(){var e=this,t=$.map(this.files,function(t,e){return{name:t.name,size:t.size,type:t.type}}),n=jQuery.Event("shiny:inputchanged");n.name=this.id,n.value=t,n.binding=fileInputBinding,n.el=this.el,n.inputType="shiny.fileupload",$(document).trigger(n),this.makeRequest("uploadEnd",[this.jobId,this.id],function(t){e.$setActive(!1),e.onProgress(null,1),e.$bar().text("Upload complete"),$(n.el).val("")},function(t){e.onError(t)}),this.$bar().text("Finishing upload")},this.onError=function(t){this.$setError(t||""),this.$setActive(!1)},this.onAbort=function(){this.$setVisible(!1)},this.onProgress=function(t,e){this.$bar().width(Math.round(100*e)+"%"),this.$bar().text(t?t.name:"")},this.$container=function(){return $("#"+$escape(this.id)+"_progress.shiny-file-input-progress")},this.$bar=function(){return $("#"+$escape(this.id)+"_progress.shiny-file-input-progress .progress-bar")},this.$setVisible=function(t){this.$container().css("visibility",t?"visible":"hidden")},this.$setError=function(t){this.$bar().toggleClass("progress-bar-danger",null!==t),null!==t&&(this.onProgress(null,1),this.$bar().text(t))},this.$setActive=function(t){this.$container().toggleClass("active",!!t)}}.call(FileUploader.prototype);var $fileInputs=$(),fileInputBinding=new InputBinding;function initShiny(){var c=exports.shinyapp=new ShinyApp;var g,t=new InputBatchSender(c),e=new InputNoResendDecorator(t),n=new InputEventDecorator(e),f=new InputRateDecorator(n),i=new InputDeferDecorator(n);0<$('input[type="submit"], button[type="submit"]').length?(g=i,$('input[type="submit"], button[type="submit"]').each(function(){$(this).click(function(t){t.preventDefault(),i.submit()})})):g=f,g=new InputValidateDecorator(g),exports.setInputValue=exports.onInputChange=function(t,e,n){n=addDefaultInputOpts(n),g.setInput(t,e,n)};var m={};function a(t){for(var e=0<arguments.length&&void 0!==t?t:document,n=inputBindings.getBindings(),i={},a=0;a<n.length;a++)for(var r=n[a].binding,o=r.find(e)||[],s=0;s<o.length;s++){var u,l,d,c,p=o[s],h=r.getId(p);h&&!m[h]&&(i[l=(u=r.getType(p))?h+":"+u:h]={value:r.getValue(p),opts:{immediate:!0,binding:r,el:p}},d=function(){var u=r,l=p;return function(t){var e,n,i,a,r,o,s;n=l,i=t,(s=(e=u).getId(n))&&(a=e.getValue(n),(r=e.getType(n))&&(s=s+":"+r),o={priority:i?"deferred":"immediate",binding:e,el:n},g.setInput(s,a,o))}}(),r.subscribe(p,d),$(p).data("shiny-input-binding",r),$(p).addClass("shiny-bound-input"),null!==(c=r.getRatePolicy(p))&&f.setRatePolicy(l,c.policy,c.delay),m[h]={binding:r,node:p},$(p).trigger({type:"shiny:bound",binding:r,bindingType:"input"}))}return i}function r(t){return function(t){for(var e=0<arguments.length&&void 0!==t?t:document,e=$(e),n=outputBindings.getBindings(),i=0;i<n.length;i++)for(var a=n[i].binding,r=a.find(e)||[],o=0;o<r.length;o++){var s,u,l=r[o],d=a.getId(l);d&&$.contains(document,l)&&((s=$(l)).hasClass("shiny-bound-output")||(u=new OutputBindingAdapter(l,a),c.bindOutput(d,u),s.data("shiny-output-binding",u),s.addClass("shiny-bound-output"),s.attr("aria-live")||s.attr("aria-live","polite"),s.trigger({type:"shiny:bound",binding:a,bindingType:"output"})))}setTimeout(v,0),setTimeout(x,0)}(t),a(t)}function o(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document,e=inputBindings.getBindings(),n=0;n<e.length;n++)for(var i=e[n].binding,a=i.find(t)||[],r=0;r<a.length;r++)a[r]._shiny_initialized||(a[r]._shiny_initialized=!0,i.initialize(a[r]))}function s(t){var e=$(t).data("shiny-output-binding");return e?e.getId():null}exports.bindAll=function(t){var e=r(t);$.each(e,function(t,e){g.setInput(t,e.value,e.opts)}),initDeferredIframes()},exports.unbindAll=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(t,e){var n=0<arguments.length&&void 0!==t?t:document,i=1<arguments.length&&void 0!==e&&e,a=$(n).find(".shiny-bound-input");i&&$(n).hasClass("shiny-bound-input")&&a.push(n);for(var r=0;r<a.length;r++){var o,s=a[r],u=$(s).data("shiny-input-binding");u&&(o=u.getId(s),$(s).removeClass("shiny-bound-input"),delete m[o],u.unsubscribe(s),$(s).trigger({type:"shiny:unbound",binding:u,bindingType:"input"}))}}(t,e),function(t,e){var n=0<arguments.length&&void 0!==t?t:document,i=1<arguments.length&&void 0!==e&&e,a=$(n).find(".shiny-bound-output");i&&$(n).hasClass("shiny-bound-output")&&a.push(n);for(var r=0;r<a.length;r++){var o,s=$(a[r]),u=s.data("shiny-output-binding");u&&(o=u.binding.getId(a[r]),c.unbindOutput(o,u),s.removeClass("shiny-bound-output"),s.removeData("shiny-output-binding"),s.trigger({type:"shiny:unbound",binding:u.binding,bindingType:"output"}))}setTimeout(v,0),setTimeout(x,0)}(t,e)},(exports.initializeInputs=o)(document);var u=mapValues(r(document),function(t){return t.value});function l(t){if(!t)return null;var e=getStyle(t,"background-color"),n=e.match(/^rgba\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)$/);if("transparent"===e||n&&0===parseFloat(n[4])){var i=getStyle(t,"background-image");return i&&"none"!==i?null:l(t.parentElement)}return e}function d(t){var e=document.createElement("a");e.href="/";var n=document.createElement("div");n.style.setProperty("position","absolute","important"),n.style.setProperty("top","-1000px","important"),n.style.setProperty("left","0","important"),n.style.setProperty("width","30px","important"),n.style.setProperty("height","10px","important"),n.appendChild(e),t.appendChild(n);var i=getStyle(e,"color");return t.removeChild(n),i}function p(t){var e=getStyle(t,"font-family"),n=getStyle(t,"font-size");return{families:e.replace(/"/g,"").split(", "),size:n}}$(".shiny-image-output, .shiny-plot-output, .shiny-report-size").each(function(){var t=s(this);0===this.offsetWidth&&0===this.offsetHeight||(u[".clientdata_output_"+t+"_width"]=this.offsetWidth,u[".clientdata_output_"+t+"_height"]=this.offsetHeight)}),$(".shiny-image-output, .shiny-plot-output, .shiny-report-theme").each(function(){var t=s(this);u[".clientdata_output_"+t+"_bg"]=l(this),u[".clientdata_output_"+t+"_fg"]=getStyle(this,"color"),u[".clientdata_output_"+t+"_accent"]=d(this),u[".clientdata_output_"+t+"_font"]=p(this)});var h=new Debouncer(null,function(){$(".shiny-image-output, .shiny-plot-output, .shiny-report-size").each(function(){var t=s(this);0===this.offsetWidth&&0===this.offsetHeight||(g.setInput(".clientdata_output_"+t+"_width",this.offsetWidth),g.setInput(".clientdata_output_"+t+"_height",this.offsetHeight))}),$(".shiny-image-output, .shiny-plot-output, .shiny-report-theme").each(function(){var t=s(this);g.setInput(".clientdata_output_"+t+"_bg",l(this)),g.setInput(".clientdata_output_"+t+"_fg",getStyle(this,"color")),g.setInput(".clientdata_output_"+t+"_accent",d(this)),g.setInput(".clientdata_output_"+t+"_font",p(this))}),$(".shiny-bound-output").each(function(){var t=$(this),e=t.data("shiny-output-binding");t.trigger({type:"shiny:visualchange",visible:!y(this),binding:e}),e.onResize()})},0);function v(){h.normalCall()}function y(t){return null!==t&&0===t.offsetWidth&&0===t.offsetHeight&&("none"===getStyle(t,"display")||y(t.parentNode))}t.lastChanceCallback.push(function(){h.isPending()&&h.immediateCall()});var b={};$(".shiny-bound-output").each(function(){var t=s(this);y(this)?u[".clientdata_output_"+t+"_hidden"]=!0:(b[t]=!0,u[".clientdata_output_"+t+"_hidden"]=!1)});var w=new Debouncer(null,function(){var a={};for(var t in $(".shiny-bound-output").each(function(){var t=s(this);delete b[t];var e=y(this),n={type:"shiny:visualchange",visible:!e};e?g.setInput(".clientdata_output_"+t+"_hidden",!0):(a[t]=!0,g.setInput(".clientdata_output_"+t+"_hidden",!1));var i=$(this);n.binding=i.data("shiny-output-binding"),i.trigger(n)}),b)b.hasOwnProperty(t)&&g.setInput(".clientdata_output_"+t+"_hidden",!0);b=a},0);function x(){w.normalCall()}function I(i,a){return i=i.split("."),function(t){for(var e=t.namespace.split("."),n=0;n<i.length;n++)if(-1===e.indexOf(i[n]))return;a.apply(this,arguments)}}t.lastChanceCallback.push(function(){w.isPending()&&w.immediateCall()}),$(window).resize(debounce(500,v));$.each(["modal","dropdown","tab","tooltip","popover","collapse"],function(t,e){$(document.body).on("shown.bs."+e+".sendImageSize","*",I("bs",v)),$(document.body).on("shown.bs."+e+".sendOutputHiddenState hidden.bs."+e+".sendOutputHiddenState","*",I("bs",x))}),$(document.body).on("shown.sendImageSize","*",v),$(document.body).on("shown.sendOutputHiddenState hidden.sendOutputHiddenState","*",x),u[".clientdata_pixelratio"]=pixelRatio(),$(window).resize(function(){g.setInput(".clientdata_pixelratio",pixelRatio())}),u[".clientdata_url_protocol"]=window.location.protocol,u[".clientdata_url_hostname"]=window.location.hostname,u[".clientdata_url_port"]=window.location.port,u[".clientdata_url_pathname"]=window.location.pathname,u[".clientdata_url_search"]=window.location.search,$(window).on("pushstate",function(t){g.setInput(".clientdata_url_search",window.location.search)}),$(window).on("popstate",function(t){g.setInput(".clientdata_url_search",window.location.search)}),u[".clientdata_url_hash_initial"]=window.location.hash,u[".clientdata_url_hash"]=window.location.hash,$(window).on("hashchange",function(t){g.setInput(".clientdata_url_hash",window.location.hash)});var _=u[".clientdata_singletons"]=$('script[type="application/shiny-singletons"]').text();singletons.registerNames(_.split(/,/));var T=$('script[type="application/html-dependencies"]').text();$.each(T.split(/;/),function(t,e){var n=/\s*^(.+)\[(.+)\]\s*$/.exec(e);n&&registerDependency(n[1],n[2])}),u[".clientdata_allowDataUriScheme"]="undefined"!=typeof WebSocket,e.reset(u),c.connect(u),$(document).one("shiny:connected",function(){initDeferredIframes()})}function initDeferredIframes(){window.Shiny&&window.Shiny.shinyapp&&window.Shiny.shinyapp.isConnected()&&$(".shiny-frame-deferred").each(function(t,e){var n=$(e);n.removeClass("shiny-frame-deferred"),n.attr("src",n.attr("data-deferred-src")),n.attr("data-deferred-src",null)})}$.extend(fileInputBinding,{find:function(t){return $(t).find('input[type="file"]')},getId:function(t){return InputBinding.prototype.getId.call(this,t)||t.name},getValue:function(t){var e=$(t).attr("data-restore");if(e){e=JSON.parse(e);var n=$(t).closest("div.input-group").find("input[type=text]");1===e.name.length?n.val(e.name[0]):n.val(e.name.length+" files");var i=$(t).closest("div.form-group").find(".progress"),a=i.find(".progress-bar");return i.removeClass("active"),a.width("100%"),a.css("visibility","visible"),e}return null},setValue:function(){},getType:function(){return"shiny.file"},_zoneOf:function(t){return $(t).closest("div.input-group")},_enableDraghover:function(t){var e=$(t),n=0;return e.on({"dragenter.draghover":function(t){0==n++&&e.trigger("draghover:enter",t)},"dragleave.draghover":function(t){0==--n&&e.trigger("draghover:leave",t),n<0&&console.error("draghover childCounter is negative somehow")},"dragover.draghover":function(t){t.preventDefault()},"drop.draghover":function(t){n=0,e.trigger("draghover:drop",t),t.preventDefault()}}),e},_disableDraghover:function(t){return $(t).off(".draghover")},_ZoneClass:{ACTIVE:"shiny-file-input-active",OVER:"shiny-file-input-over"},_enableDocumentEvents:function(){var t=this,e=$("html"),n=this._ZoneClass,i=n.ACTIVE,a=n.OVER;this._enableDraghover(e).on({"draghover:enter.draghover":function(){t._zoneOf($fileInputs).addClass(i)},"draghover:leave.draghover":function(){t._zoneOf($fileInputs).removeClass(i)},"draghover:drop.draghover":function(){t._zoneOf($fileInputs).removeClass(a).removeClass(i)}})},_disableDocumentEvents:function(){var t=$("html");t.off(".draghover"),this._disableDraghover(t)},_canSetFiles:function(t){var e=document.createElement("input");e.type="file";try{e.files=t}catch(t){return!1}return!0},_handleDrop:function(t,e){var n=t.originalEvent.dataTransfer.files,i=$(e);null==n?console.log("Dropping files is not supported on this browser. (no FileList)"):this._canSetFiles(n)?(i.val(""),e.files=t.originalEvent.dataTransfer.files,i.trigger("change")):(i.val(""),uploadDroppedFilesIE10Plus(e,n))},_isIE9:function(){try{return!!window.navigator.userAgent.match(/MSIE 9\./)}catch(t){return!1}},subscribe:function(n){var e,i,a=this;$(n).on("change.fileInputBinding",uploadFiles),this._isIE9()||(0===$fileInputs.length&&this._enableDocumentEvents(),$fileInputs=$fileInputs.add(n),e=this._zoneOf(n),i=this._ZoneClass.OVER,this._enableDraghover(e).on({"draghover:enter.draghover":function(){e.addClass(i)},"draghover:leave.draghover":function(t){e.removeClass(i),t.stopPropagation()},"draghover:drop.draghover":function(t,e){a._handleDrop(e,n)}}))},unsubscribe:function(t){var e=$(t),n=this._zoneOf(t);n.removeClass(this._ZoneClass.OVER).removeClass(this._ZoneClass.ACTIVE),this._disableDraghover(n),e.off(".fileInputBinding"),n.off(".draghover"),0===($fileInputs=$fileInputs.not(t)).length&&this._disableDocumentEvents()}}),inputBindings.register(fileInputBinding,"shiny.fileInputBinding"),$(function(){setTimeout(initShiny,1)}),$(document).on("keydown",function(t){var e;114!==t.which||!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(e="reactlog?w="+window.escape(exports.shinyapp.config.workerId)+"&s="+window.escape(exports.shinyapp.config.sessionId),window.open(e),t.preventDefault())}),$(document).on("keydown",function(t){var e;(115===t.which&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&!t.altKey||114===t.which&&(t.ctrlKey||t.metaKey)&&t.shiftKey&&!t.altKey)&&(e="reactlog/mark?w="+window.escape(exports.shinyapp.config.workerId)+"&s="+window.escape(exports.shinyapp.config.sessionId),$.get(e,function(t){"marked"===t&&exports.notifications.show({html:'<span id="shiny-reactlog-mark-text">Marked time point in reactlog</span>',closeButton:!0})}).fail(function(){window.open(e)}),t.preventDefault())})}();
//# sourceMappingURL=shiny.min.js.map